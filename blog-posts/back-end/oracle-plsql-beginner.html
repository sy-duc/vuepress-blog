<!doctype html>
<html lang="vi-VN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/vuepress-blog/favicon.ico"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400,500,600,700&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"><title>Làm quen với PL/SQL | Kiến Thức Từ Trải Nghiệm</title><meta name="description" content="Một blog được tạo bằng VuePress">
    <link rel="preload" href="/vuepress-blog/assets/style-VnzZgpKD.css" as="style"><link rel="stylesheet" href="/vuepress-blog/assets/style-VnzZgpKD.css">
    <link rel="modulepreload" href="/vuepress-blog/assets/app-B2yDJnH9.js"><link rel="modulepreload" href="/vuepress-blog/assets/oracle-plsql-beginner.html-Cc1lqU2C.js">
    <link rel="prefetch" href="/vuepress-blog/assets/index.html-DdrJlTL3.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-D9a-EzEr.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-SJ5mJLaP.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-Cdp5Qj2R.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-C4PKWE4O.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/fastapi-base-project.html-DDguZk9W.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-accuracy-perfomance.html-BfwGa7F-.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-gioi-thieu-tesseract.html-DmGWasCf.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-tong-quan.html-YUp4EGFT.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/oracle-plsql-advanced.html-DhX--Mza.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/oracle-plsql-expert.html-BDuXbj6t.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/oracle-plsql-intermediate.html-CxyCY-zp.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/redis-advanced.html-B_X9CFAk.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/redis-basic.html-DEyYTuNa.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-cloud-computing.html-CPgiy0lu.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-database.html-B2AuB3uC.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-ec2.html-CYSNxonY.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-gioi-thieu-aws.html-CtNhRbAC.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-iam.html-WarjJhVv.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-storage.html-QBESimEo.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/linux-beginner.html--hy0NDpe.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/linux-intermediate.html-CvHFhwyR.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/linux-shell-script.html-Bx3txoVA.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-training-saa-series.html-DSi6VA2N.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-tesseract-series.html-B0xqTmmC.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/plsql-training-series.html-DU0DpEBU.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-BOnRD3Js.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-CVKglJIi.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-DIKq2eXu.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/404.html-CaXIVzV0.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/setupDevtools-7MC2TMWH-Cis5f1xo.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container no-sidebar external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/vuepress-blog/"><img class="vp-site-logo" src="/vuepress-blog/images/logo.png" alt="Kiến Thức Từ Trải Nghiệm"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Kiến Thức Từ Trải Nghiệm</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="Trang Chủ"><!---->Trang Chủ<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/project/" aria-label="Dự Án"><!---->Dự Án<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/blog/" aria-label="Blog"><!---->Blog<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/about/" aria-label="Về Tôi"><!---->Về Tôi<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Ngôn Ngữ</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Ngôn Ngữ</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/blog-posts/back-end/oracle-plsql-beginner.html" aria-label="Tiếng Việt"><!---->Tiếng Việt<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/en/" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="Trang Chủ"><!---->Trang Chủ<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/project/" aria-label="Dự Án"><!---->Dự Án<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/blog/" aria-label="Blog"><!---->Blog<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/about/" aria-label="Về Tôi"><!---->Về Tôi<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Ngôn Ngữ</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Ngôn Ngữ</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/blog-posts/back-end/oracle-plsql-beginner.html" aria-label="Tiếng Việt"><!---->Tiếng Việt<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/en/" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="lam-quen-voi-pl-sql" tabindex="-1"><a class="header-anchor" href="#lam-quen-voi-pl-sql"><span>Làm quen với PL/SQL</span></a></h1><p><a href="#1">1. Giới thiệu về PL/SQL</a></p><p><a href="#2">2. Cú pháp cơ bản trong PL/SQL</a></p><p><a href="#3">3. Cấu trúc điều khiển</a></p><p><a href="#4">4. Xử lý ngoại lệ</a></p><p><a name="1"></a></p><h2 id="📌-1-gioi-thieu-ve-pl-sql" tabindex="-1"><a class="header-anchor" href="#📌-1-gioi-thieu-ve-pl-sql"><span>📌 1. Giới thiệu về PL/SQL</span></a></h2><h3 id="🔹-pl-sql-la-gi" tabindex="-1"><a class="header-anchor" href="#🔹-pl-sql-la-gi"><span>🔹 PL/SQL là gì?</span></a></h3><ul><li><p>SQL thì không lạ lẫm gì, là viết tắt của Structural Query Language (ngôn ngữ truy vấn có cấu trúc). Vậy PL trong PL/SQL là gì?</p></li><li><p>PL ở đây là Procedural Language extensions (phần mở rộng ngôn ngữ thủ tục).</p></li><li><p>PL/SQL (Procedural Language/SQL) là một phần mở rộng của SQL do Oracle phát triển, giúp viết các chương trình điều khiển logic, xử lý dữ liệu một cách mạnh mẽ trong Oracle Database.</p></li><li><p>PL/SQL là một ngôn ngữ bậc cao, có thể xem nó như là một ngôn ngữ lập trình:</p><ul><li>Cho phép khai báo hằng số và biến, thủ tục và các hàm, kiểu dữ liệu và biến của các kiểu dữ liệu, điều kiện, vòng lặp, và các trigger.</li><li>Có thể sử lý các ngoại lệ (lỗi tại thời gian chạy).</li><li>Mảng cũng được hỗ trợ nâng cấp để sử dụng cho các tập hợp trong PL/SQL.</li></ul></li></ul><h3 id="🔹-luu-y-ve-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-luu-y-ve-pl-sql"><span>🔹 Lưu ý về PL/SQL</span></a></h3><ul><li><p>PL/SQL là ngôn ngữ nhúng, không thể hoạt động độc lập. Bản thân nó chỉ có thể thực thi trong hệ cơ sở dữ liệu Oracle. Do vậy, đừng nhầm lẫn nó với các ngôn ngữ lập trình khác như Java, C++.</p></li><li><p>So sánh PL/SQL với SQL thuần:</p><table><thead><tr><th style="text-align:center;">SQL (thuần)</th><th style="text-align:center;">SQL (thuần)</th></tr></thead><tbody><tr><td style="text-align:center;">Chỉ có thể thực hiện các câu lệnh đơn như SELECT, INSERT, UPDATE, DELETE</td><td style="text-align:center;">Có thể viết chương trình với logic phức tạp: vòng lặp, điều kiện, xử lý ngoại lệ</td></tr><tr><td style="text-align:center;">Không hỗ trợ biến</td><td style="text-align:center;">Hỗ trợ khai báo và sử dụng biến</td></tr><tr><td style="text-align:center;">Chạy từng câu lệnh SQL riêng lẻ</td><td style="text-align:center;">Có thể chạy nhiều câu SQL cùng một lúc trong một chương trình</td></tr><tr><td style="text-align:center;">Không hỗ trợ xử lý ngoại lệ</td><td style="text-align:center;">Có cơ chế xử lý ngoại lệ mạnh mẽ</td></tr></tbody></table></li></ul><h3 id="🔹-kien-truc-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-kien-truc-pl-sql"><span>🔹 Kiến trúc PL/SQL</span></a></h3><p>PL/SQL sẽ chịu trách nhiệm biên dịch code chúng ta viết thành byte-code.</p><p>Một đoạn code từ PL/SQL block được gửi tới PL/SQL Engine, đoạn code sẽ được biên dịch và thực thi ở Oracle Database Server.</p><p><img src="/vuepress-blog/assets/oracle-plsql-kien-truc-DgbdZl4E.png" alt="Kiến trúc PL/SQL"></p><h3 id="🔹-uu-nhuoc-điem-cua-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-uu-nhuoc-điem-cua-pl-sql"><span>🔹 Ưu nhược điểm của PL/SQL</span></a></h3><ul><li><p>Ưu điểm:</p><p>✔️ Tùy vào trường hợp cụ thể, PL/SQL đem lại một hiệu suất tốt hơn</p><p>✔️ PL/SQL hỗ trợ OOP (hướng đối tượng), cho phép kế thừa, v.v.</p><p>✔️ PL/SQL hỗ trợ nhiều công cụ phát triển Web (Web application)</p></li><li><p>Nhược điểm:</p><p>❌ Không có tính năng debug, phải debug bằng mắt chứ PL/SQL không hỗ trợ</p></li></ul><h3 id="🔹-thanh-phan-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-thanh-phan-trong-pl-sql"><span>🔹 Thành phần trong PL/SQL</span></a></h3><ul><li><strong>Anonymous Block (Khối ẩn danh)</strong>: Một đoạn mã PL/SQL không có tên, chỉ thực thi một lần và không được lưu trong database.</li><li><strong>Stored Procedure (Thủ tục lưu trữ)</strong>: Một nhóm câu lệnh SQL và PL/SQL được lưu trong database và có thể được gọi lại nhiều lần.</li><li><strong>Function (Hàm)</strong>: Giống như stored procedure, nhưng bắt buộc phải trả về một giá trị duy nhất.</li><li><strong>Package (Gói)</strong>: Tập hợp các function, procedure, biến và kiểu dữ liệu được nhóm lại để dễ quản lý.</li><li><strong>Trigger</strong>: Một đoạn PL/SQL tự động thực thi khi có sự kiện xảy ra (INSERT, UPDATE, DELETE).</li><li><strong>Cursor (Con trỏ)</strong>: Dùng để duyệt qua từng dòng dữ liệu của một tập kết quả truy vấn.</li></ul><h3 id="🔹-moi-truong-thuc-thi" tabindex="-1"><a class="header-anchor" href="#🔹-moi-truong-thuc-thi"><span>🔹 Môi trường thực thi</span></a></h3><p>Để có thể tiếp cận nhanh với PL/SQL cần có một công cụ lập trình.</p><p>Khác với SQLServer hoặc MySQL có gói download mà khi cài đặt xong nó có sẵn công cụ trực quan để làm việc. Với Oracle sau khi cài đặt xong, cần cài đặt thêm một công cụ trực quan khác.</p><p>Một vài lựa chọn cho công cụ sử dụng như:</p><ul><li><p><a href="http://www.oracle.com/technetwork/developer-tools/sql-developer/overview/index.html" target="_blank" rel="noopener noreferrer">Oracle SQL Developer</a>: Oracle cung cấp miễn phí một công cụ trực quan Oracle SQL Developer, download tại:</p></li><li><p><a href="http://www.allroundautomations.com/plsqldev.html" target="_blank" rel="noopener noreferrer">PL/SQL Developer</a>: Đây là một phần mềm thương mại. So sánh với các phần mềm trên có thể thấy nó là tốt nhất.</p></li></ul><p><a name="2"></a></p><h2 id="📌-2-cu-phap-co-ban-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#📌-2-cu-phap-co-ban-trong-pl-sql"><span>📌 2. Cú pháp cơ bản trong PL/SQL</span></a></h2><h3 id="🔹-cau-truc-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-cau-truc-pl-sql"><span>🔹 Cấu trúc PL/SQL</span></a></h3><p>Mỗi chương trình PL/SQL đều tuân theo một cấu trúc cơ bản, bao gồm 3 phần chính:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    <span class="token comment">-- Phần khai báo (tùy chọn)</span></span>
<span class="line">    <span class="token comment">-- Khai báo biến, hằng số, con trỏ...</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token comment">-- Phần xử lý chính (bắt buộc)</span></span>
<span class="line">    <span class="token comment">-- Viết các câu lệnh SQL, vòng lặp, điều kiện...</span></span>
<span class="line">EXCEPTION</span>
<span class="line">    <span class="token comment">-- Phần xử lý ngoại lệ (tùy chọn)</span></span>
<span class="line">    <span class="token comment">-- Bắt lỗi và xử lý lỗi</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Ví dụ đơn giản:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Hello, PL/SQL!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>➡️ Giải thích:</p><ul><li>BEGIN ... END; đánh dấu phần chương trình chính.</li><li>DBMS_OUTPUT.PUT_LINE(&#39;Hello, PL/SQL!&#39;); in ra màn hình một thông báo.</li><li>/ dùng để thực thi đoạn mã PL/SQL trên SQL*Plus hoặc SQL Developer.</li></ul><h3 id="🔹-comment-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-comment-trong-pl-sql"><span>🔹 Comment trong PL/SQL</span></a></h3><p>PL/SQL hỗ trợ hai kiểu comment:</p><ul><li>Comment một dòng: --</li><li>Comment nhiều dòng: /_ ... _/</li></ul><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token comment">-- Đây là comment một dòng</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Hello, PL/SQL!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">/* Đây là comment nhiều dòng</span>
<span class="line">       Có thể viết nhiều dòng bên trong */</span></span>
<span class="line">    <span class="token boolean">NULL</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="🔹-kieu-du-lieu-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-kieu-du-lieu-trong-pl-sql"><span>🔹 Kiểu dữ liệu trong PL/SQL</span></a></h3><h4 id="_1️⃣-kieu-du-lieu-so-numeric-data-types" tabindex="-1"><a class="header-anchor" href="#_1️⃣-kieu-du-lieu-so-numeric-data-types"><span>1️⃣ Kiểu dữ liệu số (Numeric Data Types)</span></a></h4><table><thead><tr><th style="text-align:center;">Kiểu dữ liệu</th><th style="text-align:center;">Mô tả</th></tr></thead><tbody><tr><td style="text-align:center;">NUMBER(p, s)</td><td style="text-align:center;">Số có độ chính xác cố định, p là tổng số chữ số, s là số chữ số thập phân</td></tr><tr><td style="text-align:center;">INTEGER</td><td style="text-align:center;">Tương đương NUMBER(38, 0), lưu số nguyên</td></tr><tr><td style="text-align:center;">BINARY_FLOAT</td><td style="text-align:center;">Kiểu số thực (dấu phẩy động, độ chính xác đơn)</td></tr><tr><td style="text-align:center;">BINARY_DOUBLE</td><td style="text-align:center;">Kiểu số thực (dấu phẩy động, độ chính xác kép)</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_num NUMBER<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> :<span class="token operator">=</span> <span class="token number">1234.56</span><span class="token punctuation">;</span></span>
<span class="line">    v_int <span class="token keyword">INTEGER</span> :<span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Number: &#39;</span> <span class="token operator">||</span> v_num<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Integer: &#39;</span> <span class="token operator">||</span> v_int<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2️⃣-kieu-du-lieu-ky-tu-character-data-types" tabindex="-1"><a class="header-anchor" href="#_2️⃣-kieu-du-lieu-ky-tu-character-data-types"><span>2️⃣ Kiểu dữ liệu ký tự (Character Data Types)</span></a></h4><table><thead><tr><th style="text-align:center;">Kiểu dữ liệu</th><th style="text-align:center;">Mô tả</th></tr></thead><tbody><tr><td style="text-align:center;">CHAR(n)</td><td style="text-align:center;">Chuỗi ký tự cố định độ dài n</td></tr><tr><td style="text-align:center;">VARCHAR2(n)</td><td style="text-align:center;">Chuỗi ký tự có độ dài thay đổi (tối đa 32,767 byte)</td></tr><tr><td style="text-align:center;">CLOB</td><td style="text-align:center;">Lưu trữ chuỗi văn bản lớn (tối đa 4GB)</td></tr><tr><td style="text-align:center;">NCHAR(n), NVARCHAR2(n)</td><td style="text-align:center;">Tương tự CHAR và VARCHAR2, nhưng hỗ trợ Unicode</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_name VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> :<span class="token operator">=</span> <span class="token string">&#39;Hello PL/SQL&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span>v_name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3️⃣-kieu-du-lieu-ngay-va-thoi-gian-date-and-time-data-types" tabindex="-1"><a class="header-anchor" href="#_3️⃣-kieu-du-lieu-ngay-va-thoi-gian-date-and-time-data-types"><span>3️⃣ Kiểu dữ liệu ngày và thời gian (Date and Time Data Types)</span></a></h4><table><thead><tr><th style="text-align:center;">Kiểu dữ liệu</th><th style="text-align:center;">Mô tả</th></tr></thead><tbody><tr><td style="text-align:center;">DATE</td><td style="text-align:center;">Lưu ngày và giờ (bao gồm năm, tháng, ngày, giờ, phút, giây)</td></tr><tr><td style="text-align:center;">TIMESTAMP</td><td style="text-align:center;">Giống DATE, nhưng có thể có độ chính xác đến mili-giây</td></tr><tr><td style="text-align:center;">TIMESTAMP WITH TIME ZONE</td><td style="text-align:center;">Lưu timestamp kèm múi giờ</td></tr><tr><td style="text-align:center;">TIMESTAMP WITH LOCAL TIME ZONE</td><td style="text-align:center;">Tự động chuyển đổi timestamp theo múi giờ người dùng</td></tr><tr><td style="text-align:center;">INTERVAL YEAR TO MONTH</td><td style="text-align:center;">Lưu khoảng cách thời gian theo năm/tháng</td></tr><tr><td style="text-align:center;">INTERVAL DAY TO SECOND</td><td style="text-align:center;">Lưu khoảng cách thời gian theo ngày, giờ, phút, giây</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_date <span class="token keyword">DATE</span> :<span class="token operator">=</span> SYSDATE<span class="token punctuation">;</span></span>
<span class="line">    v_timestamp <span class="token keyword">TIMESTAMP</span> :<span class="token operator">=</span> SYSTIMESTAMP<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Current Date: &#39;</span> <span class="token operator">||</span> TO_CHAR<span class="token punctuation">(</span>v_date<span class="token punctuation">,</span> <span class="token string">&#39;YYYY-MM-DD HH24:MI:SS&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Current Timestamp: &#39;</span> <span class="token operator">||</span> TO_CHAR<span class="token punctuation">(</span>v_timestamp<span class="token punctuation">,</span> <span class="token string">&#39;YYYY-MM-DD HH24:MI:SS.FF&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4️⃣-kieu-du-lieu-boolean-boolean-data-type" tabindex="-1"><a class="header-anchor" href="#_4️⃣-kieu-du-lieu-boolean-boolean-data-type"><span>4️⃣ Kiểu dữ liệu Boolean (Boolean Data Type)</span></a></h4><p>Chỉ có TRUE, FALSE, hoặc NULL.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">v_flag <span class="token keyword">BOOLEAN</span> :<span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_5️⃣-kieu-du-lieu-con-tro-cursor-data-type" tabindex="-1"><a class="header-anchor" href="#_5️⃣-kieu-du-lieu-con-tro-cursor-data-type"><span>5️⃣ Kiểu dữ liệu con trỏ (Cursor Data Type)</span></a></h4><p>Dùng để lưu trữ kết quả truy vấn. (Sẽ tìm hiểu kỹ hơn ở các phần sau)</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    <span class="token keyword">CURSOR</span> emp_cursor <span class="token operator">IS</span> <span class="token keyword">SELECT</span> emp_name <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span></span>
<span class="line">    v_emp_name employees<span class="token punctuation">.</span>emp_name<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">OPEN</span> emp_cursor<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">FETCH</span> emp_cursor <span class="token keyword">INTO</span> v_emp_name<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">CLOSE</span> emp_cursor<span class="token punctuation">;</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Employee: &#39;</span> <span class="token operator">||</span> v_emp_name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6️⃣-kieu-du-lieu-tap-hop-collection-data-types" tabindex="-1"><a class="header-anchor" href="#_6️⃣-kieu-du-lieu-tap-hop-collection-data-types"><span>6️⃣ Kiểu dữ liệu tập hợp (Collection Data Types)</span></a></h4><p>Dùng để lưu trữ danh sách giá trị. (Sẽ tìm hiểu kỹ hơn ở các phần sau)</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    <span class="token keyword">TYPE</span> NumArray <span class="token operator">IS</span> VARRAY<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">OF</span> NUMBER<span class="token punctuation">;</span></span>
<span class="line">    v_numbers NumArray :<span class="token operator">=</span> NumArray<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span>v_numbers<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- Output: 10</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7️⃣-kieu-du-lieu-lob-large-object-data-types" tabindex="-1"><a class="header-anchor" href="#_7️⃣-kieu-du-lieu-lob-large-object-data-types"><span>7️⃣ Kiểu dữ liệu LOB (Large Object Data Types)</span></a></h4><p>Dùng để lưu trữ dữ liệu lớn.</p><table><thead><tr><th style="text-align:center;">Kiểu dữ liệu</th><th style="text-align:center;">Mô tả</th></tr></thead><tbody><tr><td style="text-align:center;">BLOB</td><td style="text-align:center;">Lưu trữ dữ liệu nhị phân (ảnh, video)</td></tr><tr><td style="text-align:center;">CLOB</td><td style="text-align:center;">Lưu trữ văn bản lớn (tối đa 4GB)</td></tr><tr><td style="text-align:center;">NCLOB</td><td style="text-align:center;">Tương tự CLOB, nhưng hỗ trợ Unicode</td></tr><tr><td style="text-align:center;">BFILE</td><td style="text-align:center;">Lưu trữ đường dẫn file bên ngoài (không lưu trực tiếp trong DB)</td></tr></tbody></table><h3 id="🔹-khai-bao-bien" tabindex="-1"><a class="header-anchor" href="#🔹-khai-bao-bien"><span>🔹 Khai báo biến</span></a></h3><p>Biến trong PL/SQL phải được khai báo trước khi sử dụng.</p><p>Cú pháp:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">variable_name datatype <span class="token punctuation">[</span><span class="token keyword">DEFAULT</span> <span class="token keyword">value</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Ví dụ:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_name VARCHAR2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    v_salary NUMBER :<span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Lương: &#39;</span> <span class="token operator">||</span> v_salary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>🔥 Để gán giá trị cho biến:</p><ul><li>Dùng := (gán trực tiếp)<div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">v_salary :<span class="token operator">=</span> <span class="token number">6000</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Dùng SELECT INTO (lấy từ database)<div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> salary <span class="token keyword">INTO</span> v_salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> emp_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li>Dùng DEFAULT khi khai báo<div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">v_bonus NUMBER <span class="token keyword">DEFAULT</span> <span class="token number">1000</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><p>🔥 %TYPE – Dùng kiểu dữ liệu của cột trong bảng: Thay vì khai báo kiểu dữ liệu cố định, ta có thể dùng %TYPE để kế thừa kiểu dữ liệu từ bảng:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CURSOR</span> emp_cursor <span class="token operator">IS</span> <span class="token keyword">SELECT</span> emp_name <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span></span>
<span class="line">v_emp_name employees<span class="token punctuation">.</span>emp_name<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>🔥 Hằng số (Constant): Dùng CONSTANT để tạo giá trị không đổi.</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line">PI_VALUE CONSTANT NUMBER :<span class="token operator">=</span> <span class="token number">3.14159</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="🔹-toan-tu-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#🔹-toan-tu-trong-pl-sql"><span>🔹 Toán tử trong PL/SQL</span></a></h3><ul><li><p>Toán tử số học:</p><table><thead><tr><th style="text-align:center;">Toán tử</th><th style="text-align:center;">Ý nghĩa</th></tr></thead><tbody><tr><td style="text-align:center;">+</td><td style="text-align:center;">Cộng</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">Trừ</td></tr><tr><td style="text-align:center;">*</td><td style="text-align:center;">Nhân</td></tr><tr><td style="text-align:center;">/</td><td style="text-align:center;">Chia</td></tr><tr><td style="text-align:center;">MOD</td><td style="text-align:center;">Chia lấy dư</td></tr></tbody></table></li><li><p>Toán tử so sánh:</p><table><thead><tr><th style="text-align:center;">Toán tử</th><th style="text-align:center;">Ý nghĩa</th></tr></thead><tbody><tr><td style="text-align:center;">=</td><td style="text-align:center;">Bằng</td></tr><tr><td style="text-align:center;">!= hoặc &lt;&gt;</td><td style="text-align:center;">Khác</td></tr><tr><td style="text-align:center;">&gt;</td><td style="text-align:center;">Lớn hơn</td></tr><tr><td style="text-align:center;">&lt;</td><td style="text-align:center;">Nhỏ hơn</td></tr><tr><td style="text-align:center;">&gt;=</td><td style="text-align:center;">Lớn hơn hoặc bằng</td></tr><tr><td style="text-align:center;">&lt;=</td><td style="text-align:center;">Nhỏ hơn hoặc bằng</td></tr></tbody></table></li></ul><h2 id="📌-3-cau-truc-đieu-khien" tabindex="-1"><a class="header-anchor" href="#📌-3-cau-truc-đieu-khien"><span>📌 3. Cấu trúc điều khiển</span></a></h2><h3 id="🔹-cau-truc-đieu-kien-if-else" tabindex="-1"><a class="header-anchor" href="#🔹-cau-truc-đieu-kien-if-else"><span>🔹 Cấu trúc điều kiện (IF ... ELSE)</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">IF</span> condition <span class="token keyword">THEN</span></span>
<span class="line">    <span class="token comment">-- Thực thi nếu điều kiện đúng</span></span>
<span class="line">ELSIF another_condition <span class="token keyword">THEN</span></span>
<span class="line">    <span class="token comment">-- Thực thi nếu điều kiện này đúng</span></span>
<span class="line"><span class="token keyword">ELSE</span></span>
<span class="line">    <span class="token comment">-- Thực thi nếu tất cả điều kiện trên đều sai</span></span>
<span class="line"><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="🔹-cau-truc-đieu-kien-case" tabindex="-1"><a class="header-anchor" href="#🔹-cau-truc-đieu-kien-case"><span>🔹 Cấu trúc điều kiện (CASE)</span></a></h3><h4 id="_1️⃣-dang-case-đon-gian-simple-case" tabindex="-1"><a class="header-anchor" href="#_1️⃣-dang-case-đon-gian-simple-case"><span>1️⃣ Dạng CASE đơn giản (Simple CASE)</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CASE</span> expression</span>
<span class="line">    <span class="token keyword">WHEN</span> value1 <span class="token keyword">THEN</span> result1</span>
<span class="line">    <span class="token keyword">WHEN</span> value2 <span class="token keyword">THEN</span> result2</span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token keyword">ELSE</span> default_result</span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2️⃣-dang-case-tim-kiem-searched-case" tabindex="-1"><a class="header-anchor" href="#_2️⃣-dang-case-tim-kiem-searched-case"><span>2️⃣ Dạng CASE tìm kiếm (Searched CASE)</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CASE</span></span>
<span class="line">    <span class="token keyword">WHEN</span> condition1 <span class="token keyword">THEN</span> result1</span>
<span class="line">    <span class="token keyword">WHEN</span> condition2 <span class="token keyword">THEN</span> result2</span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token keyword">ELSE</span> default_result</span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="🔹-cau-truc-vong-lap" tabindex="-1"><a class="header-anchor" href="#🔹-cau-truc-vong-lap"><span>🔹 Cấu trúc vòng lặp</span></a></h3><h4 id="_1️⃣-vong-lap-loop-vo-han-can-exit" tabindex="-1"><a class="header-anchor" href="#_1️⃣-vong-lap-loop-vo-han-can-exit"><span>1️⃣ Vòng lặp LOOP (Vô hạn, cần EXIT)</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_count NUMBER :<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">LOOP</span></span>
<span class="line">        DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Lần lặp: &#39;</span> <span class="token operator">||</span> v_count<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        v_count :<span class="token operator">=</span> v_count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">EXIT</span> <span class="token keyword">WHEN</span> v_count <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">-- Thoát khi v_count &gt; 5</span></span>
<span class="line">    <span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2️⃣-vong-lap-while" tabindex="-1"><a class="header-anchor" href="#_2️⃣-vong-lap-while"><span>2️⃣ Vòng lặp WHILE</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">WHILE</span> v_count <span class="token operator">&lt;=</span> <span class="token number">5</span> <span class="token keyword">LOOP</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Lần lặp: &#39;</span> <span class="token operator">||</span> v_count<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    v_count :<span class="token operator">=</span> v_count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3️⃣-vong-lap-for" tabindex="-1"><a class="header-anchor" href="#_3️⃣-vong-lap-for"><span>3️⃣ Vòng lặp FOR</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">FOR</span> i <span class="token operator">IN</span> <span class="token number">1.</span><span class="token number">.5</span> <span class="token keyword">LOOP</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Lần lặp: &#39;</span> <span class="token operator">||</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="📌-4-xu-ly-ngoai-le" tabindex="-1"><a class="header-anchor" href="#📌-4-xu-ly-ngoai-le"><span>📌 4. Xử lý ngoại lệ</span></a></h2><h3 id="🔹-cu-phap" tabindex="-1"><a class="header-anchor" href="#🔹-cu-phap"><span>🔹 Cú pháp</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span> </span>
<span class="line">  <span class="token operator">&lt;</span>declarations section<span class="token operator">&gt;</span> </span>
<span class="line"><span class="token keyword">BEGIN</span> </span>
<span class="line">  <span class="token comment">-- Code có thể gây lỗi</span></span>
<span class="line">EXCEPTION </span>
<span class="line">  <span class="token keyword">WHEN</span> exception1 <span class="token keyword">THEN</span>  </span>
<span class="line">    <span class="token comment">-- Exception1 handling statements  </span></span>
<span class="line">  <span class="token keyword">WHEN</span> exception2  <span class="token keyword">THEN</span>  </span>
<span class="line">    <span class="token comment">-- Exception2 handling statements  </span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> </span>
<span class="line">  <span class="token keyword">WHEN</span> others <span class="token keyword">THEN</span> </span>
<span class="line">    <span class="token comment">-- Other exception handling statements </span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1️⃣-vi-du-bat-loi-chung-when-others" tabindex="-1"><a class="header-anchor" href="#_1️⃣-vi-du-bat-loi-chung-when-others"><span>1️⃣ Ví dụ bắt lỗi chung (WHEN OTHERS)</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">  v_number NUMBER<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">  v_number :<span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">-- Lỗi chia cho 0</span></span>
<span class="line">EXCEPTION</span>
<span class="line">  <span class="token keyword">WHEN</span> OTHERS <span class="token keyword">THEN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Đã xảy ra lỗi!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2️⃣-vi-du-bat-loi-cu-the" tabindex="-1"><a class="header-anchor" href="#_2️⃣-vi-du-bat-loi-cu-the"><span>2️⃣ Ví dụ bắt lỗi cụ thể</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">  v_number NUMBER<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">  v_number :<span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">-- Lỗi chia cho 0</span></span>
<span class="line">EXCEPTION</span>
<span class="line">  <span class="token keyword">WHEN</span> ZERO_DIVIDE <span class="token keyword">THEN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Lỗi chia cho 0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">WHEN</span> OTHERS <span class="token keyword">THEN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Lỗi không xác định&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="🔹-raise-exception" tabindex="-1"><a class="header-anchor" href="#🔹-raise-exception"><span>🔹 Raise Exception</span></a></h3><p>Chúng ta có thể nêu ra các ngoại lệ một cách rõ ràng bằng cách sử dụng lệnh RAISE:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span> </span>
<span class="line">  exception_name EXCEPTION<span class="token punctuation">;</span> <span class="token comment">-- Khai báo một ngoại lệ của riêng mình</span></span>
<span class="line"><span class="token keyword">BEGIN</span> </span>
<span class="line">  <span class="token keyword">IF</span> condition <span class="token keyword">THEN</span> </span>
<span class="line">    RAISE exception_name<span class="token punctuation">;</span> </span>
<span class="line">  <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span> </span>
<span class="line">EXCEPTION </span>
<span class="line">  <span class="token keyword">WHEN</span> exception_name <span class="token keyword">THEN</span> </span>
<span class="line">    statement<span class="token punctuation">;</span> </span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="🔹-cac-ngoai-le-do-he-thong-xac-đinh" tabindex="-1"><a class="header-anchor" href="#🔹-cac-ngoai-le-do-he-thong-xac-đinh"><span>🔹 Các ngoại lệ do hệ thống xác định</span></a></h3><p>Một số ngoại lệ có sẵn trong PL/SQL:</p><table><thead><tr><th style="text-align:center;">Ngoại lệ</th><th style="text-align:center;">Mô tả</th></tr></thead><tbody><tr><td style="text-align:center;">ACCESS_INTO_NULL</td><td style="text-align:center;">Gọi phương thức trên một đối tượng chưa được khởi tạo</td></tr><tr><td style="text-align:center;">CASE_NOT_FOUND</td><td style="text-align:center;">Không có trường hợp nào phù hợp trong CASE (và không có ELSE)</td></tr><tr><td style="text-align:center;">COLLECTION_IS_NULL</td><td style="text-align:center;">Cố gắng tham chiếu một collection chưa được khởi tạo</td></tr><tr><td style="text-align:center;">CURSOR_ALREADY_OPEN</td><td style="text-align:center;">Mở một con trỏ (cursor) đã được mở trước đó</td></tr><tr><td style="text-align:center;">DUP_VAL_ON_INDEX</td><td style="text-align:center;">Vi phạm ràng buộc UNIQUE trên cột khi chèn dữ liệu</td></tr><tr><td style="text-align:center;">INVALID_CURSOR</td><td style="text-align:center;">Cố gắng thao tác trên con trỏ (cursor) không hợp lệ</td></tr><tr><td style="text-align:center;">INVALID_NUMBER</td><td style="text-align:center;">Chuyển đổi kiểu dữ liệu số không hợp lệ (ví dụ: TO_NUMBER(&#39;abc&#39;))</td></tr><tr><td style="text-align:center;">LOGIN_DENIED</td><td style="text-align:center;">Sai username hoặc password khi kết nối CSDL</td></tr><tr><td style="text-align:center;">NO_DATA_FOUND</td><td style="text-align:center;">Không có dữ liệu nào được tìm thấy trong truy vấn SELECT INTO</td></tr><tr><td style="text-align:center;">NOT_LOGGED_ON</td><td style="text-align:center;">Cố gắng thao tác trên database khi chưa đăng nhập</td></tr><tr><td style="text-align:center;">PROGRAM_ERROR</td><td style="text-align:center;">Lỗi nội bộ của PL/SQL (không mong muốn xảy ra)</td></tr><tr><td style="text-align:center;">ROWTYPE_MISMATCH</td><td style="text-align:center;">Kiểu dữ liệu của một hàng không khớp với biến nhận</td></tr><tr><td style="text-align:center;">SELF_IS_NULL</td><td style="text-align:center;">Gọi phương thức trên một instance chưa được khởi tạo của một object</td></tr><tr><td style="text-align:center;">STORAGE_ERROR</td><td style="text-align:center;">Hết bộ nhớ hoặc lỗi cấp phát bộ nhớ</td></tr><tr><td style="text-align:center;">SUBSCRIPT_BEYOND_COUNT</td><td style="text-align:center;">Chỉ mục (index) vượt quá số phần tử có trong collection</td></tr><tr><td style="text-align:center;">SUBSCRIPT_OUTSIDE_LIMIT</td><td style="text-align:center;">Chỉ mục (index) ngoài phạm vi hợp lệ của collection</td></tr><tr><td style="text-align:center;">SYS_INVALID_ROWID</td><td style="text-align:center;">Giá trị ROWID không hợp lệ</td></tr><tr><td style="text-align:center;">TIMEOUT_ON_RESOURCE</td><td style="text-align:center;">Quá thời gian chờ khi truy cập tài nguyên</td></tr><tr><td style="text-align:center;">TOO_MANY_ROWS</td><td style="text-align:center;">Truy vấn SELECT INTO trả về nhiều hơn một dòng dữ liệu</td></tr><tr><td style="text-align:center;">VALUE_ERROR</td><td style="text-align:center;">Lỗi khi gán giá trị không hợp lệ vào biến (ví dụ: tràn số)</td></tr><tr><td style="text-align:center;">ZERO_DIVIDE</td><td style="text-align:center;">Lỗi chia cho 0</td></tr></tbody></table></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/vuepress-blog/assets/app-B2yDJnH9.js" defer></script>
  </body>
</html>

<!doctype html>
<html lang="vi-VN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/vuepress-blog/favicon.ico"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Josefin+Sans:300,400,500,600,700&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"><title>Store Procedure, Function, Cursor v√† Triggers trong PL/SQL | Ki·∫øn Th·ª©c T·ª´ Tr·∫£i Nghi·ªám</title><meta name="description" content="M·ªôt blog ƒë∆∞·ª£c t·∫°o b·∫±ng VuePress">
    <link rel="preload" href="/vuepress-blog/assets/style-B1g75gDY.css" as="style"><link rel="stylesheet" href="/vuepress-blog/assets/style-B1g75gDY.css">
    <link rel="modulepreload" href="/vuepress-blog/assets/app-B_aW_us5.js"><link rel="modulepreload" href="/vuepress-blog/assets/oracle-plsql-intermediate.html-Bfvq2Res.js">
    <link rel="prefetch" href="/vuepress-blog/assets/index.html-qpMOeNNK.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-1mT6tdvz.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-DbcGQFko.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-7tWpAsXA.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-D5mVk4ZI.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/fastapi-base-project.html-DyNHypAU.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/mov-to-mp4-converter.html-B0o6RJ-z.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-accuracy-perfomance.html-YJFj0CUa.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-cache-tesseract.html-CSfTOZdU.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-gioi-thieu-tesseract.html-DQRHHMbm.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-practical.html-CDhzB2D2.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-template-matching.html-CtxjhAHK.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-tong-quan.html-BdPirIF7.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-training-tesseract.html-Ca3rc2qh.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/oracle-plsql-advanced.html-KH_wHkrU.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/oracle-plsql-beginner.html-CXNKILoT.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/oracle-plsql-expert.html-Dqe3PyH4.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/redis-advanced.html-Dn2B1B7A.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/redis-basic.html-C6GzlyXJ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-cloud-computing.html-DoMir4NJ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-database.html-DPlOIUoD.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-ec2.html-DltAzvU3.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-gioi-thieu-aws.html-DXeg5ldO.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-iam.html-8RFLpJ5f.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-monitoring.html-BwFgSJuM.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-networking.html-DtaG-mRZ.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-storage.html-C6XNZB9m.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/linux-beginner.html-CLhZ-4FF.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/linux-intermediate.html-BfBxP89z.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/linux-shell-script.html-BROpABs8.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/aws-training-saa-series.html-my5FuGT4.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/ocr-tesseract-series.html-CK7TW4Mn.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/plsql-training-series.html-BOqdo233.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-yE-a7NJw.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-X9XitxP6.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/index.html-CJcHN_HI.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/404.html-DJkSWBI6.js" as="script"><link rel="prefetch" href="/vuepress-blog/assets/setupDevtools-7MC2TMWH-BzNC6rz-.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container no-sidebar external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/vuepress-blog/"><img class="vp-site-logo" src="/vuepress-blog/images/logo.png" alt="Ki·∫øn Th·ª©c T·ª´ Tr·∫£i Nghi·ªám"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Ki·∫øn Th·ª©c T·ª´ Tr·∫£i Nghi·ªám</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="Trang Ch·ªß"><!---->Trang Ch·ªß<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/project/" aria-label="D·ª± √Ån"><!---->D·ª± √Ån<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/blog/" aria-label="Blog"><!---->Blog<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/about/" aria-label="V·ªÅ T√¥i"><!---->V·ªÅ T√¥i<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Ng√¥n Ng·ªØ</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Ng√¥n Ng·ªØ</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/blog-posts/back-end/oracle-plsql-intermediate.html" aria-label="Ti·∫øng Vi·ªát"><!---->Ti·∫øng Vi·ªát<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/en/" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/" aria-label="Trang Ch·ªß"><!---->Trang Ch·ªß<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/project/" aria-label="D·ª± √Ån"><!---->D·ª± √Ån<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/blog/" aria-label="Blog"><!---->Blog<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/vuepress-blog/about/" aria-label="V·ªÅ T√¥i"><!---->V·ªÅ T√¥i<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Ng√¥n Ng·ªØ</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Ng√¥n Ng·ªØ</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-blog/blog-posts/back-end/oracle-plsql-intermediate.html" aria-label="Ti·∫øng Vi·ªát"><!---->Ti·∫øng Vi·ªát<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/vuepress-blog/en/" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="store-procedure-function-cursor-va-triggers" tabindex="-1"><a class="header-anchor" href="#store-procedure-function-cursor-va-triggers"><span>Store Procedure, Function, Cursor v√† Triggers</span></a></h1><p><a href="#1">1. Store Procedure</a></p><p><a href="#2">2. Function</a></p><p><a href="#3">3. Cursor</a></p><p><a href="#4">4. Triggers</a></p><p><a href="#5">5. Package</a></p><p><a name="1"></a></p><h2 id="üìå-1-store-procedure-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#üìå-1-store-procedure-trong-pl-sql"><span>üìå 1. Store Procedure trong PL/SQL</span></a></h2><p>M·ªôt PROCEDURE trong PL/SQL l√† m·ªôt kh·ªëi m√£ c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng, th·ª±c hi·ªán m·ªôt nhi·ªám v·ª• c·ª• th·ªÉ m√† kh√¥ng tr·∫£ v·ªÅ gi√° tr·ªã tr·ª±c ti·∫øp (kh√°c v·ªõi FUNCTION).</p><h3 id="üîπ-tao-mot-procedure" tabindex="-1"><a class="header-anchor" href="#üîπ-tao-mot-procedure"><span>üîπ T·∫°o m·ªôt PROCEDURE</span></a></h3><p>C√∫ ph√°p chung:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token operator">OR</span> <span class="token keyword">REPLACE</span><span class="token punctuation">]</span> <span class="token keyword">PROCEDURE</span> procedure_name</span>
<span class="line"><span class="token punctuation">(</span></span>
<span class="line">    param1 <span class="token punctuation">[</span><span class="token operator">IN</span> <span class="token operator">|</span> <span class="token keyword">OUT</span> <span class="token operator">|</span> <span class="token operator">IN</span> <span class="token keyword">OUT</span><span class="token punctuation">]</span> datatype<span class="token punctuation">,</span></span>
<span class="line">    param2 <span class="token punctuation">[</span><span class="token operator">IN</span> <span class="token operator">|</span> <span class="token keyword">OUT</span> <span class="token operator">|</span> <span class="token operator">IN</span> <span class="token keyword">OUT</span><span class="token punctuation">]</span> datatype<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line">    <span class="token comment">-- Khai b√°o bi·∫øn (n·∫øu c·∫ßn)</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token comment">-- Kh·ªëi l·ªánh th·ª±c thi</span></span>
<span class="line">EXCEPTION</span>
<span class="line">    <span class="token comment">-- X·ª≠ l√Ω l·ªói (n·∫øu c·∫ßn)</span></span>
<span class="line"><span class="token keyword">END</span> procedure_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üî• Gi·∫£i th√≠ch:</p><ul><li>CREATE OR REPLACE PROCEDURE ‚Üí T·∫°o ho·∫∑c thay th·∫ø m·ªôt procedure.</li><li>procedure_name ‚Üí T√™n procedure.</li><li>param1, param2, ... ‚Üí Danh s√°ch tham s·ªë (c√≥ th·ªÉ kh√¥ng c√≥). <ul><li>IN ‚Üí Tham s·ªë ƒë·∫ßu v√†o (m·∫∑c ƒë·ªãnh).</li><li>OUT ‚Üí Tham s·ªë ƒë·∫ßu ra (tr·∫£ v·ªÅ gi√° tr·ªã sau khi th·ª±c thi).</li><li>IN OUT ‚Üí Tham s·ªë v·ª´a nh·∫≠p v√†o, v·ª´a xu·∫•t ra.</li></ul></li><li>IS / AS ‚Üí B·∫Øt ƒë·∫ßu ph·∫ßn th√¢n c·ªßa procedure.</li><li>BEGIN ... END; ‚Üí Ch·ª©a logic th·ª±c thi.</li><li>EXCEPTION ‚Üí X·ª≠ l√Ω l·ªói n·∫øu c√≥.</li></ul><h3 id="üîπ-vi-du-co-ban" tabindex="-1"><a class="header-anchor" href="#üîπ-vi-du-co-ban"><span>üîπ V√≠ d·ª• c∆° b·∫£n</span></a></h3><h4 id="_1Ô∏è‚É£-procedure-khong-co-tham-so" tabindex="-1"><a class="header-anchor" href="#_1Ô∏è‚É£-procedure-khong-co-tham-so"><span>1Ô∏è‚É£ Procedure kh√¥ng c√≥ tham s·ªë:</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> say_hello</span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Hello, PL/SQL!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> say_hello<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üì¢ C√°ch g·ªçi procedure:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    say_hello<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2Ô∏è‚É£-procedure-co-tham-so-ƒëau-vao-in" tabindex="-1"><a class="header-anchor" href="#_2Ô∏è‚É£-procedure-co-tham-so-ƒëau-vao-in"><span>2Ô∏è‚É£ Procedure c√≥ tham s·ªë ƒë·∫ßu v√†o (IN):</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> greet_user<span class="token punctuation">(</span>p_name <span class="token operator">IN</span> VARCHAR2<span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Xin ch√†o, &#39;</span> <span class="token operator">||</span> p_name <span class="token operator">||</span> <span class="token string">&#39;!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> greet_user<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üì¢ C√°ch g·ªçi procedure:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    greet_user<span class="token punctuation">(</span><span class="token string">&#39;John&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3Ô∏è‚É£-procedure-co-tham-so-ƒëau-ra-out" tabindex="-1"><a class="header-anchor" href="#_3Ô∏è‚É£-procedure-co-tham-so-ƒëau-ra-out"><span>3Ô∏è‚É£ Procedure c√≥ tham s·ªë ƒë·∫ßu ra (OUT):</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> get_salary<span class="token punctuation">(</span></span>
<span class="line">    p_emp_id <span class="token operator">IN</span> NUMBER<span class="token punctuation">,</span></span>
<span class="line">    p_salary <span class="token keyword">OUT</span> NUMBER</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> salary <span class="token keyword">INTO</span> p_salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> emp_id <span class="token operator">=</span> p_emp_id<span class="token punctuation">;</span></span>
<span class="line">EXCEPTION</span>
<span class="line">    <span class="token keyword">WHEN</span> NO_DATA_FOUND <span class="token keyword">THEN</span></span>
<span class="line">        p_salary :<span class="token operator">=</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> get_salary<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4Ô∏è‚É£-procedure-co-tham-so-vua-nhap-vua-xuat-in-out" tabindex="-1"><a class="header-anchor" href="#_4Ô∏è‚É£-procedure-co-tham-so-vua-nhap-vua-xuat-in-out"><span>4Ô∏è‚É£ Procedure c√≥ tham s·ªë v·ª´a nh·∫≠p v·ª´a xu·∫•t (IN OUT):</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> update_salary<span class="token punctuation">(</span></span>
<span class="line">    p_emp_id <span class="token operator">IN</span> NUMBER<span class="token punctuation">,</span></span>
<span class="line">    p_new_salary <span class="token operator">IN</span> <span class="token keyword">OUT</span> NUMBER</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">UPDATE</span> employees <span class="token keyword">SET</span> salary <span class="token operator">=</span> p_new_salary <span class="token keyword">WHERE</span> emp_id <span class="token operator">=</span> p_emp_id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">COMMIT</span><span class="token punctuation">;</span></span>
<span class="line">    p_new_salary :<span class="token operator">=</span> p_new_salary <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">-- Thay ƒë·ªïi gi√° tr·ªã tham s·ªë</span></span>
<span class="line"><span class="token keyword">END</span> update_salary<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="üîπ-xoa-mot-procedure" tabindex="-1"><a class="header-anchor" href="#üîπ-xoa-mot-procedure"><span>üîπ X√≥a m·ªôt PROCEDURE</span></a></h3><p>ƒê·ªÉ x√≥a m·ªôt procedure, d√πng l·ªánh:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> procedure_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><a name="2"></a></p><h2 id="üìå-2-function-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#üìå-2-function-trong-pl-sql"><span>üìå 2. Function trong PL/SQL</span></a></h2><p>M·ªôt FUNCTION trong PL/SQL l√† m·ªôt kh·ªëi m√£ c√≥ th·ªÉ t√°i s·ª≠ d·ª•ng, th·ª±c hi·ªán m·ªôt nhi·ªám v·ª• c·ª• th·ªÉ v√† b·∫Øt bu·ªôc ph·∫£i tr·∫£ v·ªÅ m·ªôt gi√° tr·ªã.</p><h3 id="üîπ-tao-mot-function" tabindex="-1"><a class="header-anchor" href="#üîπ-tao-mot-function"><span>üîπ T·∫°o m·ªôt FUNCTION</span></a></h3><p>C√∫ ph√°p chung:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token operator">OR</span> <span class="token keyword">REPLACE</span><span class="token punctuation">]</span> <span class="token keyword">FUNCTION</span> function_name</span>
<span class="line"><span class="token punctuation">(</span></span>
<span class="line">    param1 <span class="token punctuation">[</span><span class="token operator">IN</span><span class="token punctuation">]</span> datatype<span class="token punctuation">,</span></span>
<span class="line">    param2 <span class="token punctuation">[</span><span class="token operator">IN</span><span class="token punctuation">]</span> datatype<span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">RETURN</span> return_datatype</span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line">    <span class="token comment">-- Khai b√°o bi·∫øn (n·∫øu c·∫ßn)</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token comment">-- Th·ª±c hi·ªán x·ª≠ l√Ω</span></span>
<span class="line">    <span class="token keyword">RETURN</span> gi√°_tr·ªã<span class="token punctuation">;</span></span>
<span class="line">EXCEPTION</span>
<span class="line">    <span class="token comment">-- X·ª≠ l√Ω l·ªói (n·∫øu c·∫ßn)</span></span>
<span class="line"><span class="token keyword">END</span> function_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üî• Gi·∫£i th√≠ch:</p><ul><li>CREATE OR REPLACE FUNCTION ‚Üí T·∫°o ho·∫∑c thay th·∫ø function</li><li>function_name ‚Üí T√™n function</li><li>param1, param2, ... ‚Üí Danh s√°ch tham s·ªë (ch·ªâ h·ªó tr·ª£ IN, kh√¥ng c√≥ OUT ho·∫∑c IN OUT)</li><li>RETURN return_datatype ‚Üí X√°c ƒë·ªãnh ki·ªÉu d·ªØ li·ªáu tr·∫£ v·ªÅ.</li><li>RETURN gi√°_tr·ªã; ‚Üí Function b·∫Øt bu·ªôc ph·∫£i c√≥ c√¢u l·ªánh RETURN</li></ul><h3 id="üîπ-vi-du-co-ban-1" tabindex="-1"><a class="header-anchor" href="#üîπ-vi-du-co-ban-1"><span>üîπ V√≠ d·ª• c∆° b·∫£n</span></a></h3><h4 id="_1Ô∏è‚É£-function-tinh-tong-hai-so" tabindex="-1"><a class="header-anchor" href="#_1Ô∏è‚É£-function-tinh-tong-hai-so"><span>1Ô∏è‚É£ Function t√≠nh t·ªïng hai s·ªë:</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> sum_two_numbers<span class="token punctuation">(</span></span>
<span class="line">    p_num1 <span class="token operator">IN</span> NUMBER<span class="token punctuation">,</span></span>
<span class="line">    p_num2 <span class="token operator">IN</span> NUMBER</span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">RETURN</span> NUMBER</span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">RETURN</span> p_num1 <span class="token operator">+</span> p_num2<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> sum_two_numbers<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üî• Gi·∫£i th√≠ch: Function tr√™n nh·∫≠n hai s·ªë p_num1 v√† p_num2, sau ƒë√≥ tr·∫£ v·ªÅ t·ªïng c·ªßa ch√∫ng.</p><p>üì¢ C√°ch g·ªçi function:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_result NUMBER<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    v_result :<span class="token operator">=</span> sum_two_numbers<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;T·ªïng hai s·ªë: &#39;</span> <span class="token operator">||</span> v_result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2Ô∏è‚É£-function-lay-luong-nhan-vien" tabindex="-1"><a class="header-anchor" href="#_2Ô∏è‚É£-function-lay-luong-nhan-vien"><span>2Ô∏è‚É£ Function l·∫•y l∆∞∆°ng nh√¢n vi√™n:</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> get_salary<span class="token punctuation">(</span>p_emp_id <span class="token operator">IN</span> NUMBER<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">RETURN</span> NUMBER</span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line">    v_salary NUMBER<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> salary <span class="token keyword">INTO</span> v_salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> emp_id <span class="token operator">=</span> p_emp_id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">RETURN</span> v_salary<span class="token punctuation">;</span></span>
<span class="line">EXCEPTION</span>
<span class="line">    <span class="token keyword">WHEN</span> NO_DATA_FOUND <span class="token keyword">THEN</span></span>
<span class="line">        <span class="token keyword">RETURN</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> get_salary<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üî• Gi·∫£i th√≠ch:</p><ul><li>Function truy v·∫•n l∆∞∆°ng c·ªßa nh√¢n vi√™n theo emp_id v√† tr·∫£ v·ªÅ k·∫øt qu·∫£.</li><li>N·∫øu kh√¥ng t√¨m th·∫•y nh√¢n vi√™n, function tr·∫£ v·ªÅ NULL.</li></ul><p>üì¢ C√°ch g·ªçi function trong SQL:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">SELECT</span> get_salary<span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>üì¢ Ho·∫∑c trong PL/SQL block</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_salary NUMBER<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    v_salary :<span class="token operator">=</span> get_salary<span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;L∆∞∆°ng nh√¢n vi√™n: &#39;</span> <span class="token operator">||</span> v_salary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3Ô∏è‚É£-function-co-xu-ly-ngoai-le" tabindex="-1"><a class="header-anchor" href="#_3Ô∏è‚É£-function-co-xu-ly-ngoai-le"><span>3Ô∏è‚É£ Function c√≥ x·ª≠ l√Ω ngo·∫°i l·ªá:</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> get_department_name<span class="token punctuation">(</span>p_dept_id <span class="token operator">IN</span> NUMBER<span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">RETURN</span> VARCHAR2</span>
<span class="line"><span class="token operator">IS</span></span>
<span class="line">    v_dept_name VARCHAR2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> name <span class="token keyword">INTO</span> v_dept_name <span class="token keyword">FROM</span> departments <span class="token keyword">WHERE</span> dept_id <span class="token operator">=</span> p_dept_id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">RETURN</span> v_dept_name<span class="token punctuation">;</span></span>
<span class="line">EXCEPTION</span>
<span class="line">    <span class="token keyword">WHEN</span> NO_DATA_FOUND <span class="token keyword">THEN</span></span>
<span class="line">        <span class="token keyword">RETURN</span> <span class="token string">&#39;Kh√¥ng t√¨m th·∫•y ph√≤ng ban&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> get_department_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="üîπ-xoa-mot-function" tabindex="-1"><a class="header-anchor" href="#üîπ-xoa-mot-function"><span>üîπ X√≥a m·ªôt FUNCTION</span></a></h3><p>ƒê·ªÉ x√≥a m·ªôt function, d√πng l·ªánh:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DROP</span> <span class="token keyword">FUNCTION</span> function_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>V√≠ d·ª•:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DROP</span> <span class="token keyword">FUNCTION</span> sum_two_numbers<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><a name="3"></a></p><h2 id="üìå-3-cursor-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#üìå-3-cursor-trong-pl-sql"><span>üìå 3. Cursor trong PL/SQL</span></a></h2><ul><li>Khi th·ª±c hi·ªán m·ªôt truy v·∫•n SELECT, d·ªØ li·ªáu tr·∫£ v·ªÅ c√≥ th·ªÉ l√† nhi·ªÅu d√≤ng.</li><li>Cursor gi√∫p l·∫∑p qua t·ª´ng d√≤ng d·ªØ li·ªáu ƒë√≥ m·ªôt c√°ch c√≥ ki·ªÉm so√°t.</li><li>C√≥ hai lo·∫°i Cursor trong PL/SQL: <ul><li>Implicit Cursor (Con tr·ªè ·∫©n): Oracle t·ª± ƒë·ªông t·∫°o ra.</li><li>Explicit Cursor (Con tr·ªè t∆∞·ªùng minh): Do l·∫≠p tr√¨nh vi√™n ƒë·ªãnh nghƒ©a</li></ul></li></ul><h3 id="üîπ-implicit-cursor-con-tro-an" tabindex="-1"><a class="header-anchor" href="#üîπ-implicit-cursor-con-tro-an"><span>üîπ Implicit Cursor (Con tr·ªè ·∫©n)</span></a></h3><p>Oracle t·ª± ƒë·ªông s·ª≠ d·ª•ng Implicit Cursor khi th·ª±c hi·ªán c√°c l·ªánh INSERT, UPDATE, DELETE ho·∫∑c SELECT INTO.</p><p>üîç V√≠ d·ª•: S·ª≠ d·ª•ng Implicit Cursor v·ªõi SELECT INTO</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_emp_name employees<span class="token punctuation">.</span>last_name<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span></span>
<span class="line">    v_salary employees<span class="token punctuation">.</span>salary<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> last_name<span class="token punctuation">,</span> salary</span>
<span class="line">    <span class="token keyword">INTO</span> v_emp_name<span class="token punctuation">,</span> v_salary</span>
<span class="line">    <span class="token keyword">FROM</span> employees</span>
<span class="line">    <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Employee: &#39;</span> <span class="token operator">||</span> v_emp_name <span class="token operator">||</span> <span class="token string">&#39;, Salary: &#39;</span> <span class="token operator">||</span> v_salary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>‚ö†Ô∏è <em>L∆∞u √Ω:</em> SELECT INTO ch·ªâ ho·∫°t ƒë·ªông khi k·∫øt qu·∫£ tr·∫£ v·ªÅ ƒë√∫ng m·ªôt d√≤ng, n·∫øu c√≥ nhi·ªÅu h∆°n s·∫Ω b·ªã l·ªói.</p><h3 id="üîπ-explicit-cursor-con-tro-tuong-minh" tabindex="-1"><a class="header-anchor" href="#üîπ-explicit-cursor-con-tro-tuong-minh"><span>üîπ Explicit Cursor (Con tr·ªè t∆∞·ªùng minh)</span></a></h3><p>Explicit Cursor gi√∫p l·∫•y nhi·ªÅu d√≤ng d·ªØ li·ªáu v√† duy·ªát qua t·ª´ng d√≤ng m·ªôt c√°ch linh ho·∫°t.</p><p>C√°ch s·ª≠ d·ª•ng:</p><h4 id="_1Ô∏è‚É£-khai-bao-cursor" tabindex="-1"><a class="header-anchor" href="#_1Ô∏è‚É£-khai-bao-cursor"><span>1Ô∏è‚É£ Khai b√°o Cursor:</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CURSOR</span> cursor_name <span class="token operator">IS</span> <span class="token operator">&lt;</span><span class="token keyword">SELECT</span> query<span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2Ô∏è‚É£-mo-cursor" tabindex="-1"><a class="header-anchor" href="#_2Ô∏è‚É£-mo-cursor"><span>2Ô∏è‚É£ M·ªü Cursor</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">OPEN</span> cursor_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_3Ô∏è‚É£-lay-du-lieu-tu-cursor" tabindex="-1"><a class="header-anchor" href="#_3Ô∏è‚É£-lay-du-lieu-tu-cursor"><span>3Ô∏è‚É£ L·∫•y d·ªØ li·ªáu t·ª´ Cursor</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">FETCH</span> cursor_name <span class="token keyword">INTO</span> variable1<span class="token punctuation">,</span> variable2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_4Ô∏è‚É£-ƒëong-cursor" tabindex="-1"><a class="header-anchor" href="#_4Ô∏è‚É£-ƒëong-cursor"><span>4Ô∏è‚É£ ƒê√≥ng Cursor</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CLOSE</span> cursor_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="üîπ-vi-du-co-ban-explicit-cursor" tabindex="-1"><a class="header-anchor" href="#üîπ-vi-du-co-ban-explicit-cursor"><span>üîπ V√≠ d·ª• c∆° b·∫£n Explicit Cursor</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    <span class="token keyword">CURSOR</span> emp_cursor <span class="token operator">IS</span></span>
<span class="line">        <span class="token keyword">SELECT</span> employee_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> salary <span class="token keyword">FROM</span> employees<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    v_id employees<span class="token punctuation">.</span>employee_id<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span></span>
<span class="line">    v_name employees<span class="token punctuation">.</span>last_name<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span></span>
<span class="line">    v_salary employees<span class="token punctuation">.</span>salary<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">OPEN</span> emp_cursor<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">LOOP</span></span>
<span class="line">        <span class="token keyword">FETCH</span> emp_cursor <span class="token keyword">INTO</span> v_id<span class="token punctuation">,</span> v_name<span class="token punctuation">,</span> v_salary<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">EXIT</span> <span class="token keyword">WHEN</span> emp_cursor<span class="token operator">%</span>NOTFOUND<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;ID: &#39;</span> <span class="token operator">||</span> v_id <span class="token operator">||</span> <span class="token string">&#39;, Name: &#39;</span> <span class="token operator">||</span> v_name <span class="token operator">||</span> <span class="token string">&#39;, Salary: &#39;</span> <span class="token operator">||</span> v_salary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">CLOSE</span> emp_cursor<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üî• Gi·∫£i th√≠ch:</p><ul><li>FETCH emp_cursor INTO v_id, v_name, v_salary; l·∫•y t·ª´ng d√≤ng d·ªØ li·ªáu.</li><li>EXIT WHEN emp_cursor%NOTFOUND; d·ª´ng v√≤ng l·∫∑p khi kh√¥ng c√≤n d·ªØ li·ªáu.</li><li>CLOSE emp_cursor; gi·∫£i ph√≥ng con tr·ªè sau khi s·ª≠ d·ª•ng.</li></ul><h3 id="üîπ-thuoc-tinh-cua-cursor" tabindex="-1"><a class="header-anchor" href="#üîπ-thuoc-tinh-cua-cursor"><span>üîπ Thu·ªôc t√≠nh c·ªßa Cursor</span></a></h3><p>PL/SQL cung c·∫•p 4 thu·ªôc t√≠nh gi√∫p ki·ªÉm so√°t qu√° tr√¨nh l√†m vi·ªác v·ªõi Cursor:</p><table><thead><tr><th style="text-align:center;">Thu·ªôc t√≠nh</th><th style="text-align:center;">√ù nghƒ©a</th></tr></thead><tbody><tr><td style="text-align:center;">%FOUND</td><td style="text-align:center;">TRUE n·∫øu FETCH th√†nh c√¥ng, FALSE n·∫øu kh√¥ng c√≥ d·ªØ li·ªáu</td></tr><tr><td style="text-align:center;">%NOTFOUND</td><td style="text-align:center;">TRUE n·∫øu kh√¥ng c√≥ d·ªØ li·ªáu, FALSE n·∫øu c√≥ d·ªØ li·ªáu</td></tr><tr><td style="text-align:center;">%ISOPEN</td><td style="text-align:center;">TRUE n·∫øu Cursor ƒëang m·ªü, FALSE n·∫øu ƒë√£ ƒë√≥ng</td></tr><tr><td style="text-align:center;">%ROWCOUNT</td><td style="text-align:center;">S·ªë d√≤ng ƒë√£ l·∫•y t·ª´ Cursor</td></tr></tbody></table><p>üîç V√≠ d·ª•: Ki·ªÉm tra s·ªë d√≤ng ƒë√£ fetch</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">FETCH</span> emp_cursor <span class="token keyword">INTO</span> v_id<span class="token punctuation">,</span> v_name<span class="token punctuation">,</span> v_salary<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">IF</span> emp_cursor<span class="token operator">%</span>FOUND <span class="token keyword">THEN</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;L·∫•y ƒë∆∞·ª£c d√≤ng: &#39;</span> <span class="token operator">||</span> emp_cursor<span class="token operator">%</span><span class="token keyword">ROWCOUNT</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="üîπ-cursor-for-loop-cach-ƒëon-gian-ƒëe-duyet-cursor" tabindex="-1"><a class="header-anchor" href="#üîπ-cursor-for-loop-cach-ƒëon-gian-ƒëe-duyet-cursor"><span>üîπ Cursor FOR LOOP (C√°ch ƒë∆°n gi·∫£n ƒë·ªÉ duy·ªát Cursor)</span></a></h3><p>Thay v√¨ ph·∫£i OPEN, FETCH, CLOSE th·ªß c√¥ng, PL/SQL cung c·∫•p Cursor FOR LOOP, t·ª± ƒë·ªông m·ªü, l·∫•y d·ªØ li·ªáu v√† ƒë√≥ng Cursor.</p><p>üîç V√≠ d·ª•: Duy·ªát d·ªØ li·ªáu b·∫±ng Cursor FOR LOOP</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">FOR</span> emp_rec <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> employee_id<span class="token punctuation">,</span> last_name<span class="token punctuation">,</span> salary <span class="token keyword">FROM</span> employees<span class="token punctuation">)</span> <span class="token keyword">LOOP</span></span>
<span class="line">        DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;ID: &#39;</span> <span class="token operator">||</span> emp_rec<span class="token punctuation">.</span>employee_id <span class="token operator">||</span> <span class="token string">&#39;, Name: &#39;</span> <span class="token operator">||</span> emp_rec<span class="token punctuation">.</span>last_name <span class="token operator">||</span> <span class="token string">&#39;, Salary: &#39;</span> <span class="token operator">||</span> emp_rec<span class="token punctuation">.</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a name="4"></a></p><h2 id="üìå-4-trigger-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#üìå-4-trigger-trong-pl-sql"><span>üìå 4. Trigger trong PL/SQL</span></a></h2><p>Trigger l√† m·ªôt kh·ªëi PL/SQL t·ª± ƒë·ªông th·ª±c thi khi m·ªôt s·ª± ki·ªán INSERT, UPDATE, DELETE x·∫£y ra tr√™n m·ªôt b·∫£ng ho·∫∑c m·ªôt view.</p><ul><li>Kh√¥ng c·∫ßn g·ªçi th·ªß c√¥ng, trigger s·∫Ω k√≠ch ho·∫°t t·ª± ƒë·ªông khi th·ªèa m√£n ƒëi·ªÅu ki·ªán.</li><li>D√πng ƒë·ªÉ ki·ªÉm tra d·ªØ li·ªáu, ghi log, t·ª± ƒë·ªông c·∫≠p nh·∫≠t gi√° tr·ªã, v.v.</li></ul><h3 id="üîπ-tao-mot-trigger" tabindex="-1"><a class="header-anchor" href="#üîπ-tao-mot-trigger"><span>üîπ T·∫°o m·ªôt Trigger</span></a></h3><p>C√∫ ph√°p chung:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token punctuation">[</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token punctuation">]</span> <span class="token keyword">TRIGGER</span> trigger_name</span>
<span class="line">{BEFORE <span class="token operator">|</span> <span class="token keyword">AFTER</span> <span class="token operator">|</span> INSTEAD <span class="token keyword">OF</span>}</span>
<span class="line">{<span class="token keyword">INSERT</span> <span class="token operator">|</span> <span class="token keyword">UPDATE</span> <span class="token operator">|</span> <span class="token keyword">DELETE</span>}</span>
<span class="line"><span class="token keyword">ON</span> table_name</span>
<span class="line"><span class="token punctuation">[</span> <span class="token keyword">FOR EACH ROW</span> <span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token comment">-- Kh·ªëi l·ªánh th·ª±c thi</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üî• Gi·∫£i th√≠ch:</p><ul><li>BEFORE: Trigger ch·∫°y tr∆∞·ªõc khi s·ª± ki·ªán x·∫£y ra.</li><li>AFTER: Trigger ch·∫°y sau khi s·ª± ki·ªán ho√†n t·∫•t.</li><li>INSTEAD OF: D√πng cho VIEW ƒë·ªÉ thay th·∫ø h√†nh ƒë·ªông g·ªëc.</li><li>FOR EACH ROW: Trigger k√≠ch ho·∫°t cho t·ª´ng d√≤ng b·ªã ·∫£nh h∆∞·ªüng.</li></ul><h3 id="üîπ-vi-du-co-ban-2" tabindex="-1"><a class="header-anchor" href="#üîπ-vi-du-co-ban-2"><span>üîπ V√≠ d·ª• c∆° b·∫£n</span></a></h3><h4 id="_1Ô∏è‚É£-kiem-tra-du-lieu-truoc-khi-insert" tabindex="-1"><a class="header-anchor" href="#_1Ô∏è‚É£-kiem-tra-du-lieu-truoc-khi-insert"><span>1Ô∏è‚É£ Ki·ªÉm tra d·ªØ li·ªáu tr∆∞·ªõc khi INSERT:</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">TRIGGER</span> trg_check_salary</span>
<span class="line">BEFORE <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> employees</span>
<span class="line"><span class="token keyword">FOR EACH ROW</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">IF</span> :NEW<span class="token punctuation">.</span>salary <span class="token operator">&lt;</span> <span class="token number">3000000</span> <span class="token keyword">THEN</span></span>
<span class="line">        RAISE_APPLICATION_ERROR<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20001</span><span class="token punctuation">,</span> <span class="token string">&#39;L∆∞∆°ng ph·∫£i t·ª´ 3 tri·ªáu tr·ªü l√™n!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>‚úÖ K·∫øt qu·∫£: N·∫øu c·ªë g·∫Øng th√™m nh√¢n vi√™n c√≥ l∆∞∆°ng &lt; 3 tri·ªáu, h·ªá th·ªëng s·∫Ω b√°o l·ªói.</p><h4 id="_2Ô∏è‚É£-luu-ban-ghi-ƒëa-xoa-vao-bang-backup" tabindex="-1"><a class="header-anchor" href="#_2Ô∏è‚É£-luu-ban-ghi-ƒëa-xoa-vao-bang-backup"><span>2Ô∏è‚É£ L∆∞u b·∫£n ghi ƒë√£ x√≥a v√†o b·∫£ng backup:</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">TRIGGER</span> trg_backup_employee</span>
<span class="line"><span class="token keyword">AFTER</span> <span class="token keyword">DELETE</span> <span class="token keyword">ON</span> employees</span>
<span class="line"><span class="token keyword">FOR EACH ROW</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employees_backup <span class="token punctuation">(</span>employee_id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> deleted_at<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>:OLD<span class="token punctuation">.</span>employee_id<span class="token punctuation">,</span> :OLD<span class="token punctuation">.</span>name<span class="token punctuation">,</span> :OLD<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> SYSDATE<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>‚úÖ K·∫øt qu·∫£: Khi x√≥a nh√¢n vi√™n, d·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c l∆∞u v√†o b·∫£ng backup.</p><h3 id="üîπ-xoa-mot-trigger" tabindex="-1"><a class="header-anchor" href="#üîπ-xoa-mot-trigger"><span>üîπ X√≥a m·ªôt Trigger</span></a></h3><p>C√∫ ph√°p x√≥a trigger:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DROP</span> <span class="token keyword">TRIGGER</span> trigger_name<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>üí° <em>L∆∞u √Ω:</em></p><ul><li><p>Khi x√≥a trigger, n√≥ s·∫Ω bi·∫øn m·∫•t ho√†n to√†n kh·ªèi database.</p></li><li><p>N·∫øu mu·ªën ch·ªâ v√¥ hi·ªáu h√≥a (disable) trigger t·∫°m th·ªùi, c√≥ th·ªÉ d√πng:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TRIGGER</span> trigger_name <span class="token keyword">DISABLE</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>V√† k√≠ch ho·∫°t l·∫°i khi c·∫ßn:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">ALTER</span> <span class="token keyword">TRIGGER</span> trigger_name <span class="token keyword">ENABLE</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul><p><a name="5"></a></p><h2 id="üìå-5-goi-package-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#üìå-5-goi-package-trong-pl-sql"><span>üìå 5. G√≥i (Package) trong PL/SQL</span></a></h2><p>Package trong PL/SQL l√† m·ªôt t·∫≠p h·ª£p c√°c Procedure, Function, Cursor, v√† bi·∫øn ƒë∆∞·ª£c nh√≥m l·∫°i th√†nh m·ªôt module duy nh·∫•t.</p><ul><li>T·ªï ch·ª©c code g·ªçn g√†ng, d·ªÖ qu·∫£n l√Ω.</li><li>C·∫£i thi·ªán hi·ªáu su·∫•t, v√¨ c√°c th√†nh ph·∫ßn trong package ƒë∆∞·ª£c n·∫°p v√†o b·ªô nh·ªõ khi g·ªçi l·∫ßn ƒë·∫ßu.</li><li>H·ªó tr·ª£ t√≠nh k·∫ø th·ª´a trong PL/SQL.</li></ul><h3 id="üîπ-cau-truc-cua-mot-package" tabindex="-1"><a class="header-anchor" href="#üîπ-cau-truc-cua-mot-package"><span>üîπ C·∫•u tr√∫c c·ªßa m·ªôt Package</span></a></h3><p>M·ªôt Package c√≥ 2 ph·∫ßn:</p><ul><li>Package Specification (Giao di·ªán b√™n ngo√†i).</li><li>Package Body (C√†i ƒë·∫∑t chi ti·∫øt b√™n trong).</li></ul><h3 id="üîπ-cu-phap-package" tabindex="-1"><a class="header-anchor" href="#üîπ-cu-phap-package"><span>üîπ C√∫ ph√°p Package</span></a></h3><ul><li><p>ƒê·ªãnh nghƒ©a Package Specification (Ph·∫ßn khai b√°o):</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> PACKAGE package_name <span class="token keyword">AS</span></span>
<span class="line">    <span class="token comment">-- Khai b√°o h·∫±ng s·ªë, bi·∫øn, cursor</span></span>
<span class="line">    var1 NUMBER<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">-- Khai b√°o Procedure, Function</span></span>
<span class="line">    <span class="token keyword">PROCEDURE</span> proc_example<span class="token punctuation">(</span>p_id NUMBER<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">FUNCTION</span> func_example<span class="token punctuation">(</span>p_id NUMBER<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> VARCHAR2<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> package_name<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üí° Package Specification gi·ªëng nh∆∞ m·ªôt API ‚Äî ch·ªâ khai b√°o c√°i c·∫ßn c√¥ng khai.</p></li><li><p>ƒê·ªãnh nghƒ©a Package Body (Ph·∫ßn tri·ªÉn khai):</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> PACKAGE BODY package_name <span class="token keyword">AS</span></span>
<span class="line">    <span class="token comment">-- C√†i ƒë·∫∑t Procedure</span></span>
<span class="line">    <span class="token keyword">PROCEDURE</span> proc_example<span class="token punctuation">(</span>p_id NUMBER<span class="token punctuation">)</span> <span class="token operator">IS</span></span>
<span class="line">    <span class="token keyword">BEGIN</span></span>
<span class="line">        DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Proc called with ID: &#39;</span> <span class="token operator">||</span> p_id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">END</span> proc_example<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">-- C√†i ƒë·∫∑t Function</span></span>
<span class="line">    <span class="token keyword">FUNCTION</span> func_example<span class="token punctuation">(</span>p_id NUMBER<span class="token punctuation">)</span> <span class="token keyword">RETURN</span> VARCHAR2 <span class="token operator">IS</span></span>
<span class="line">    <span class="token keyword">BEGIN</span></span>
<span class="line">        <span class="token keyword">RETURN</span> <span class="token string">&#39;Hello &#39;</span> <span class="token operator">||</span> p_id<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">END</span> func_example<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span> package_name<span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>üí° Package Body ch·ª©a code x·ª≠ l√Ω th·ª±c t·∫ø c·ªßa Procedure v√† Function.</p></li></ul><h3 id="üîπ-su-dung-package" tabindex="-1"><a class="header-anchor" href="#üîπ-su-dung-package"><span>üîπ S·ª≠ d·ª•ng Package</span></a></h3><ul><li><p>G·ªçi Procedure trong Package:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    package_name<span class="token punctuation">.</span>proc_example<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>G·ªçi Function trong Package:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    result VARCHAR2<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    result :<span class="token operator">=</span> package_name<span class="token punctuation">.</span>func_example<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/vuepress-blog/assets/app-B_aW_us5.js" defer></script>
  </body>
</html>

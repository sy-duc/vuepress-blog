import{_ as s,c as a,d as e,o as i}from"./app-D72msq1U.js";const t={};function l(p,n){return i(),a("div",null,n[0]||(n[0]=[e(`<h1 id="redis-advanced" tabindex="-1"><a class="header-anchor" href="#redis-advanced"><span>Redis Advanced</span></a></h1><p><a href="#1">1. Redis Transaction &amp; Scripting</a></p><p><a href="#2">2. Redis Pub/Sub &amp; Stream</a></p><p><a href="#3">3. Tá»‘i Æ°u hÃ³a Redis (Performance Tuning)</a></p><p><a href="#4">4. Káº¿t há»£p Redis vá»›i cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh</a></p><p><a href="#5">5. Redis Use Case (á»¨ng dá»¥ng thá»±c táº¿)</a></p><p><a name="1"></a></p><h2 id="ğŸ“Œ-1-redis-transaction-scripting" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-1-redis-transaction-scripting"><span>ğŸ“Œ 1. Redis Transaction &amp; Scripting</span></a></h2><h3 id="ğŸ”¹-redis-transaction-la-gi" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-redis-transaction-la-gi"><span>ğŸ”¹ Redis Transaction lÃ  gÃ¬?</span></a></h3><p>Redis há»— trá»£ Transaction Ä‘á»ƒ thá»±c hiá»‡n nhiá»u lá»‡nh cÃ¹ng lÃºc má»™t cÃ¡ch an toÃ n.</p><p>ğŸ”¨ CÃ¡c bÆ°á»›c thá»±c hiá»‡n Transaction:</p><ul><li>MULTI â€“ Báº¯t Ä‘áº§u transaction</li><li>ThÃªm cÃ¡c lá»‡nh vÃ o hÃ ng Ä‘á»£i</li><li>EXEC â€“ Thá»±c thi táº¥t cáº£ lá»‡nh má»™t láº§n</li></ul><p>VÃ­ dá»¥:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">MULTI</span>
<span class="line">SET user:1 <span class="token string">&quot;Alice&quot;</span></span>
<span class="line">INCR balance:1</span>
<span class="line">EXEC</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸ”¹-cach-rollback-trong-redis" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-cach-rollback-trong-redis"><span>ğŸ”¹ CÃ¡ch Rollback trong Redis</span></a></h3><p>âŒ Redis khÃ´ng há»— trá»£ ROLLBACK nhÆ° SQL. Náº¿u má»™t lá»‡nh lá»—i, cÃ¡c lá»‡nh trÆ°á»›c Ä‘Ã³ váº«n thá»±c thi.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">MULTI</span>
<span class="line">SET user:1 <span class="token string">&quot;Alice&quot;</span></span>
<span class="line">INCR user:1  <span class="token comment"># âŒ Lá»—i! (VÃ¬ &quot;Alice&quot; khÃ´ng pháº£i sá»‘)</span></span>
<span class="line">EXEC</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ‘‰ Transaction váº«n cháº¡y, nhÆ°ng lá»‡nh INCR user:1 bá»‹ lá»—i.</p><p>ğŸ’¡ Äá»ƒ trÃ¡nh lá»—i, cÃ³ thá»ƒ dÃ¹ng WATCH Ä‘á»ƒ kiá»ƒm tra Ä‘iá»u kiá»‡n trÆ°á»›c khi thá»±c hiá»‡n Transaction.</p><h3 id="ğŸ”¹-kiem-soat-transaction-voi-watch" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-kiem-soat-transaction-voi-watch"><span>ğŸ”¹ Kiá»ƒm soÃ¡t Transaction vá»›i WATCH</span></a></h3><p>WATCH giÃºp giÃ¡m sÃ¡t má»™t key, náº¿u key nÃ y thay Ä‘á»•i trÆ°á»›c khi EXEC, Redis sáº½ há»§y Transaction.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">WATCH balance:1</span>
<span class="line">MULTI</span>
<span class="line">DECRBY balance:1 <span class="token number">50</span>  <span class="token comment"># Giáº£m 50 Ä‘Æ¡n vá»‹</span></span>
<span class="line">EXEC</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ‘‰ Náº¿u balance:1 bá»‹ thay Ä‘á»•i bá»Ÿi client khÃ¡c trÆ°á»›c EXEC, Transaction sáº½ bá»‹ há»§y.</p><h3 id="ğŸ”¹-redis-scripting" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-redis-scripting"><span>ğŸ”¹ Redis Scripting</span></a></h3><ul><li><p>Redis há»— trá»£ <strong>Lua Scripting</strong> giÃºp cháº¡y logic phá»©c táº¡p ngay trÃªn server, giÃºp tÄƒng tá»‘c thay vÃ¬ gá»­i nhiá»u lá»‡nh riÃªng láº».</p></li><li><p>VÃ­ dá»¥ Lua tÃ­nh tá»•ng 2 sá»‘:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">EVAL <span class="token string">&quot;return ARGV[1] + ARGV[2]&quot;</span> <span class="token number">0</span> <span class="token number">10</span> <span class="token number">20</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Lá»£i Ã­ch cá»§a Redis Scripting:</p><ul><li>Nhanh hÆ¡n: Lua script cháº¡y trÃªn server, giáº£m Ä‘á»™ trá»….</li><li>Atomic: ToÃ n bá»™ script cháº¡y nhÆ° má»™t Transaction, khÃ´ng bá»‹ xen ngang.</li><li>CÃ³ thá»ƒ dÃ¹ng biáº¿n táº¡m: Xá»­ lÃ½ logic phá»©c táº¡p mÃ  khÃ´ng cáº§n lÆ°u xuá»‘ng Redis.</li></ul></li></ul><p><a name="2"></a></p><h2 id="ğŸ“Œ-2-redis-pub-sub-stream" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-2-redis-pub-sub-stream"><span>ğŸ“Œ 2. Redis Pub/Sub &amp; Stream</span></a></h2><p>Redis cung cáº¥p hai cÆ¡ cháº¿ giao tiáº¿p theo mÃ´ hÃ¬nh message queue:</p><ul><li>Pub/Sub (Publish/Subscribe) â€“ Há»‡ thá»‘ng gá»­i/nháº­n tin nháº¯n theo kÃªnh (channel).</li><li>Stream â€“ CÆ¡ cháº¿ lÆ°u trá»¯ &amp; xá»­ lÃ½ dá»¯ liá»‡u dáº¡ng log</li></ul><h3 id="ğŸ”¹-redis-pub-sub" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-redis-pub-sub"><span>ğŸ”¹ Redis Pub/Sub</span></a></h3><p>ğŸš€ CÃ¡ch hoáº¡t Ä‘á»™ng:</p><ul><li>Publisher gá»­i tin nháº¯n vÃ o má»™t channel.</li><li>Subscribers Ä‘ang láº¯ng nghe channel Ä‘Ã³ sáº½ nháº­n Ä‘Æ°á»£c tin nháº¯n ngay láº­p tá»©c.</li><li>KhÃ´ng lÆ°u trá»¯ tin nháº¯n: Náº¿u subscriber offline, sáº½ khÃ´ng nháº­n Ä‘Æ°á»£c tin cÅ©.</li></ul><h3 id="ğŸ”¹-redis-pub-sub-1" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-redis-pub-sub-1"><span>ğŸ”¹ Redis Pub/Sub</span></a></h3><p>ğŸš€ CÃ¡ch hoáº¡t Ä‘á»™ng:</p><ul><li>Producer ghi dá»¯ liá»‡u vÃ o Stream.</li><li>Consumer Ä‘á»c dá»¯ liá»‡u tá»« Stream</li><li>Tin nháº¯n Ä‘Æ°á»£c lÆ°u láº¡i theo thá»i gian.</li></ul><h3 id="ğŸ”¹-so-sanh-redis-pub-sub-stream" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-so-sanh-redis-pub-sub-stream"><span>ğŸ”¹ So sÃ¡nh Redis Pub/Sub &amp; Stream</span></a></h3><table><thead><tr><th style="text-align:center;">TÃ­nh nÄƒng</th><th style="text-align:center;">Pub/Sub</th><th style="text-align:center;">Stream</th></tr></thead><tbody><tr><td style="text-align:center;">LÆ°u trá»¯ tin nháº¯n</td><td style="text-align:center;">âŒ KhÃ´ng lÆ°u trá»¯</td><td style="text-align:center;">âœ… CÃ³ lÆ°u</td></tr><tr><td style="text-align:center;">Xá»­ lÃ½ láº¡i tin nháº¯n</td><td style="text-align:center;">âŒ KhÃ´ng Ä‘Æ°á»£c</td><td style="text-align:center;">âœ… CÃ³ thá»ƒ</td></tr><tr><td style="text-align:center;">MÃ´ hÃ¬nh sá»­ dá»¥ng</td><td style="text-align:center;">Push ngay láº­p tá»©c</td><td style="text-align:center;">HÃ ng Ä‘á»£i tin nháº¯n</td></tr><tr><td style="text-align:center;">Há»— trá»£ Consumer Groups</td><td style="text-align:center;">âŒ KhÃ´ng</td><td style="text-align:center;">âœ… CÃ³</td></tr></tbody></table><p>ğŸš€ DÃ¹ng Pub/Sub khi cáº§n truyá»n dá»¯ liá»‡u theo thá»i gian thá»±c.</p><p>ğŸš€ DÃ¹ng Stream khi cáº§n lÆ°u trá»¯ vÃ  xá»­ lÃ½ tin nháº¯n láº¡i sau nÃ y.</p><p><a name="3"></a></p><h2 id="ğŸ“Œ-3-toi-uu-hoa-redis-performance-tuning" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-3-toi-uu-hoa-redis-performance-tuning"><span>ğŸ“Œ 3. Tá»‘i Æ°u hÃ³a Redis (Performance Tuning)</span></a></h2><p>Redis lÃ  má»™t trong nhá»¯ng há»‡ thá»‘ng lÆ°u trá»¯ nhanh nháº¥t, nhÆ°ng váº«n cáº§n tá»‘i Æ°u Ä‘á»ƒ Ä‘áº¡t hiá»‡u suáº¥t cao nháº¥t.</p><p>DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c chiáº¿n lÆ°á»£c tá»‘i Æ°u Redis hiá»‡u quáº£.</p><h3 id="ğŸ”¹-cau-hinh-redis-toi-uu" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-cau-hinh-redis-toi-uu"><span>ğŸ”¹ Cáº¥u hÃ¬nh Redis tá»‘i Æ°u</span></a></h3><h4 id="_1ï¸âƒ£-Ä‘ieu-chinh-maxmemory-Ä‘e-tranh-het-ram-out-of-memory" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-Ä‘ieu-chinh-maxmemory-Ä‘e-tranh-het-ram-out-of-memory"><span>1ï¸âƒ£ Äiá»u chá»‰nh maxmemory Ä‘á»ƒ trÃ¡nh háº¿t RAM (Out of Memory)</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Äáº·t giá»›i háº¡n bá»™ nhá»› trong file redis.conf</span></span>
<span class="line">maxmemory 1gb  <span class="token comment"># Giá»›i háº¡n Redis chá»‰ dÃ¹ng tá»‘i Ä‘a 1GB RAM</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ‘‰ Náº¿u bá»™ nhá»› Ä‘áº§y, Redis sáº½ xÃ³a key theo maxmemory-policy. Má»™t sá»‘ policy phá»• biáº¿n:</p><ul><li>noeviction (máº·c Ä‘á»‹nh) â†’ KhÃ´ng xÃ³a, tráº£ lá»—i khi háº¿t bá»™ nhá»›.</li><li>allkeys-lru â†’ XÃ³a key Ã­t Ä‘Æ°á»£c sá»­ dá»¥ng nháº¥t (Least Recently Used - LRU).</li><li>volatile-lru â†’ Chá»‰ xÃ³a key cÃ³ TTL (time-to-live).</li></ul><p>ğŸ‘‰ Äá»•i policy trong redis.conf:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">maxmemory-policy allkeys-lru</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2ï¸âƒ£-toi-uu-appendonly-va-save-Ä‘e-giam-i-o-disk" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-toi-uu-appendonly-va-save-Ä‘e-giam-i-o-disk"><span>2ï¸âƒ£ Tá»‘i Æ°u appendonly vÃ  save Ä‘á»ƒ giáº£m I/O disk</span></a></h4><p>Náº¿u Redis bá»‹ cháº­m do ghi Ä‘Ä©a (fsync quÃ¡ nhiá»u), Ä‘iá»u chá»‰nh nhÆ° sau:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># Táº¯t ghi Ä‘Ä©a liÃªn tá»¥c (appendonly) náº¿u khÃ´ng cáº§n thiáº¿t</span></span>
<span class="line">appendonly no  <span class="token comment"># Máº·c Ä‘á»‹nh lÃ  &quot;yes&quot;, Ä‘á»•i thÃ nh &quot;no&quot; náº¿u khÃ´ng cáº§n persistence</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Äiá»u chá»‰nh snapshot Ä‘á»ƒ giáº£m táº§n suáº¥t ghi disk</span></span>
<span class="line">save <span class="token number">900</span> <span class="token number">1</span>  <span class="token comment"># LÆ°u snapshot sau má»—i 900 giÃ¢y náº¿u cÃ³ Ã­t nháº¥t 1 thay Ä‘á»•i</span></span>
<span class="line">save <span class="token number">300</span> <span class="token number">10</span> <span class="token comment"># LÆ°u snapshot sau má»—i 300 giÃ¢y náº¿u cÃ³ Ã­t nháº¥t 10 thay Ä‘á»•i</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ”¥ Náº¿u Redis chá»‰ lÃ m cache, cÃ³ thá»ƒ táº¯t luÃ´n snapshot.</p><h3 id="ğŸ”¹-toi-uu-query-trong-redis" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-toi-uu-query-trong-redis"><span>ğŸ”¹ Tá»‘i Æ°u Query trong Redis</span></a></h3><h4 id="_1ï¸âƒ£-giam-so-lan-truy-van-bang-pipelining" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-giam-so-lan-truy-van-bang-pipelining"><span>1ï¸âƒ£ Giáº£m sá»‘ láº§n truy váº¥n báº±ng Pipelining</span></a></h4><p>Khi gá»­i nhiá»u lá»‡nh Redis, thay vÃ¬ gá»i tá»«ng lá»‡nh má»™t (tá»‘n nhiá»u round-trip), cÃ³ thá»ƒ dÃ¹ng pipelining Ä‘á»ƒ gá»­i nhiá»u lá»‡nh cÃ¹ng lÃºc:</p><p>âŒ CÃ¡ch khÃ´ng tá»‘i Æ°u (gá»­i tá»«ng lá»‡nh riÃªng láº», tá»‘n nhiá»u round-trip):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SET user:1:name <span class="token string">&quot;Alice&quot;</span></span>
<span class="line">SET user:1:age <span class="token string">&quot;30&quot;</span></span>
<span class="line">SET user:1:email <span class="token string">&quot;alice@example.com&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>âœ”ï¸ CÃ¡ch tá»‘i Æ°u vá»›i Pipelining:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">redis-cli <span class="token parameter variable">--pipe</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF</span>
<span class="line">SET user:1:name &quot;Alice&quot;</span>
<span class="line">SET user:1:age &quot;30&quot;</span>
<span class="line">SET user:1:email &quot;alice@example.com&quot;</span>
<span class="line">EOF</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ğŸ‘‰ Pipeline giÃºp giáº£m Ä‘Ã¡ng ká»ƒ thá»i gian pháº£n há»“i cá»§a Redis!</p><h4 id="_2ï¸âƒ£-su-dung-mget-thay-vi-nhieu-get" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-su-dung-mget-thay-vi-nhieu-get"><span>2ï¸âƒ£ Sá»­ dá»¥ng MGET thay vÃ¬ nhiá»u GET</span></a></h4><p>Náº¿u cáº§n láº¥y nhiá»u key cÃ¹ng lÃºc, thay vÃ¬ gá»i nhiá»u GET, hÃ£y dÃ¹ng MGET:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">MGET user:1:name user:1:age user:1:email</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ğŸ”¹-toi-uu-du-lieu-trong-redis" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-toi-uu-du-lieu-trong-redis"><span>ğŸ”¹ Tá»‘i Æ°u Dá»¯ liá»‡u trong Redis</span></a></h3><h4 id="_1ï¸âƒ£-dung-hash-thay-vi-qua-nhieu-string-nho" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-dung-hash-thay-vi-qua-nhieu-string-nho"><span>1ï¸âƒ£ DÃ¹ng Hash thay vÃ¬ quÃ¡ nhiá»u String nhá»</span></a></h4><p>Náº¿u lÆ°u trá»¯ nhiá»u thÃ´ng tin vá» má»™t Ä‘á»‘i tÆ°á»£ng, hÃ£y dÃ¹ng Hash thay vÃ¬ nhiá»u key riÃªng láº».</p><p>âŒ KhÃ´ng tá»‘i Æ°u (tá»‘n bá»™ nhá»› vÃ  cháº­m):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SET user:1:name <span class="token string">&quot;Alice&quot;</span></span>
<span class="line">SET user:1:age <span class="token string">&quot;30&quot;</span></span>
<span class="line">SET user:1:email <span class="token string">&quot;alice@example.com&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>âœ”ï¸ CÃ¡ch tá»‘i Æ°u (gá»™p vÃ o 1 Hash Ä‘á»ƒ tiáº¿t kiá»‡m RAM vÃ  tÄƒng tá»‘c truy váº¥n):</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">HSET user:1 name <span class="token string">&quot;Alice&quot;</span> age <span class="token string">&quot;30&quot;</span> email <span class="token string">&quot;alice@example.com&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_2ï¸âƒ£-dung-expire-Ä‘e-tu-Ä‘ong-xoa-du-lieu-khong-can-thiet" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-dung-expire-Ä‘e-tu-Ä‘ong-xoa-du-lieu-khong-can-thiet"><span>2ï¸âƒ£ DÃ¹ng EXPIRE Ä‘á»ƒ tá»± Ä‘á»™ng xÃ³a dá»¯ liá»‡u khÃ´ng cáº§n thiáº¿t</span></a></h4><p>Náº¿u dá»¯ liá»‡u chá»‰ cáº§n tá»“n táº¡i trong má»™t khoáº£ng thá»i gian, Ä‘áº·t Time-To-Live (TTL) Ä‘á»ƒ tiáº¿t kiá»‡m RAM.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SET session:user123 <span class="token string">&quot;token_data&quot;</span> EX <span class="token number">3600</span>  <span class="token comment"># XÃ³a sau 1 giá», trÃ¡nh dá»¯ liá»‡u &quot;rÃ¡c&quot; chiáº¿m bá»™ nhá»› Redis quÃ¡ lÃ¢u.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="ğŸ”¹-toi-uu-replica-cluster" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-toi-uu-replica-cluster"><span>ğŸ”¹ Tá»‘i Æ°u Replica &amp; Cluster</span></a></h3><h4 id="_1ï¸âƒ£-dung-redis-replication-Ä‘e-giam-tai-cho-master" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-dung-redis-replication-Ä‘e-giam-tai-cho-master"><span>1ï¸âƒ£ DÃ¹ng Redis Replication Ä‘á»ƒ giáº£m táº£i cho master</span></a></h4><p>Náº¿u má»™t Redis instance xá»­ lÃ½ quÃ¡ nhiá»u request, hÃ£y dÃ¹ng replica Ä‘á»ƒ chia táº£i:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">replicaof <span class="token number">192.168</span>.1.100 <span class="token number">6379</span>  <span class="token comment"># Cáº¥u hÃ¬nh replica cá»§a master</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>ğŸ‘‰ Master xá»­ lÃ½ ghi, Replica xá»­ lÃ½ Ä‘á»c â†’ Giáº£m táº£i Ä‘Ã¡ng ká»ƒ.</p><h4 id="_2ï¸âƒ£-dung-redis-cluster-Ä‘e-mo-rong-ngang" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-dung-redis-cluster-Ä‘e-mo-rong-ngang"><span>2ï¸âƒ£ DÃ¹ng Redis Cluster Ä‘á»ƒ má»Ÿ rá»™ng ngang</span></a></h4><p>Náº¿u má»™t mÃ¡y chá»§ Redis khÃ´ng Ä‘á»§ xá»­ lÃ½, cÃ³ thá»ƒ dÃ¹ng Redis Cluster Ä‘á»ƒ chia dá»¯ liá»‡u thÃ nh nhiá»u node.</p><h3 id="ğŸ”¹-giam-sat-debug-redis" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-giam-sat-debug-redis"><span>ğŸ”¹ GiÃ¡m sÃ¡t &amp; Debug Redis</span></a></h3><p>Náº¿u Redis bá»‹ cháº­m, kiá»ƒm tra lá»‡nh nÃ o tá»‘n thá»i gian nháº¥t:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">SLOWLOG GET <span class="token number">5</span>  <span class="token comment"># Xem 5 lá»‡nh cháº­m nháº¥t</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><a name="4"></a></p><h2 id="ğŸ“Œ-4-ket-hop-redis-voi-cac-ngon-ngu-lap-trinh" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-4-ket-hop-redis-voi-cac-ngon-ngu-lap-trinh"><span>ğŸ“Œ 4. Káº¿t há»£p Redis vá»›i cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh</span></a></h2><p>Redis cÃ³ thá»ƒ tÃ­ch há»£p vá»›i háº§u háº¿t cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh thÃ´ng qua Redis client.</p><h3 id="ğŸ”¹-redis-voi-python-redis-py" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-redis-voi-python-redis-py"><span>ğŸ”¹ Redis vá»›i Python (redis-py)</span></a></h3><ul><li><p>CÃ i Ä‘áº·t Redis client cho Python:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">pip <span class="token function">install</span> redis</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>Káº¿t ná»‘i vÃ  thao tÃ¡c vá»›i Redis:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token keyword">import</span> redis</span>
<span class="line"></span>
<span class="line"><span class="token comment"># Káº¿t ná»‘i Redis</span></span>
<span class="line">r <span class="token operator">=</span> redis<span class="token punctuation">.</span>Redis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">,</span> decode_responses<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># LÆ°u dá»¯ liá»‡u vÃ o Redis</span></span>
<span class="line">r<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Alice&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Láº¥y dá»¯ liá»‡u tá»« Redis</span></span>
<span class="line"><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># Output: Alice</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="ğŸ”¹-redis-voi-java-jedis-lettuce" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-redis-voi-java-jedis-lettuce"><span>ğŸ”¹ Redis vá»›i Java (Jedis, Lettuce)</span></a></h3><ul><li><p>ThÃªm dependency vÃ o Maven:</p><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml" data-title="xml"><pre><code><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Káº¿t ná»‘i vÃ  thao tÃ¡c vá»›i Redis:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">redis<span class="token punctuation">.</span>clients<span class="token punctuation">.</span>jedis<span class="token punctuation">.</span></span><span class="token class-name">Jedis</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisExample</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">Jedis</span> jedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jedis</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    jedis<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Charlie&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jedis<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    jedis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul>`,92)]))}const r=s(t,[["render",l],["__file","redis-advanced.html.vue"]]),d=JSON.parse('{"path":"/blog-posts/back-end/redis-advanced.html","title":"Redis Advanced","lang":"vi-VN","frontmatter":{"title":"Redis Advanced","summary":"TÃ¬m hiá»ƒu nhá»¯ng ká»¹ thuáº­t nÃ¢ng cao cá»§a Redis vÃ  cÃ¡ch Ã¡p dá»¥ng chÃºng vÃ o cÃ¡c tÃ¬nh huá»‘ng thá»±c táº¿ Ä‘á»ƒ khai thÃ¡c tá»‘i Ä‘a sá»©c máº¡nh.","date":"2025-06-17","image":"/vuepress-blog/images/posts/redis.png","category":"BACK-END","tags":["redis","training-redis"]},"headers":[{"level":2,"title":"ğŸ“Œ 1. Redis Transaction & Scripting","slug":"ğŸ“Œ-1-redis-transaction-scripting","link":"#ğŸ“Œ-1-redis-transaction-scripting","children":[{"level":3,"title":"ğŸ”¹ Redis Transaction lÃ  gÃ¬?","slug":"ğŸ”¹-redis-transaction-la-gi","link":"#ğŸ”¹-redis-transaction-la-gi","children":[]},{"level":3,"title":"ğŸ”¹ CÃ¡ch Rollback trong Redis","slug":"ğŸ”¹-cach-rollback-trong-redis","link":"#ğŸ”¹-cach-rollback-trong-redis","children":[]},{"level":3,"title":"ğŸ”¹ Kiá»ƒm soÃ¡t Transaction vá»›i WATCH","slug":"ğŸ”¹-kiem-soat-transaction-voi-watch","link":"#ğŸ”¹-kiem-soat-transaction-voi-watch","children":[]},{"level":3,"title":"ğŸ”¹ Redis Scripting","slug":"ğŸ”¹-redis-scripting","link":"#ğŸ”¹-redis-scripting","children":[]}]},{"level":2,"title":"ğŸ“Œ 2. Redis Pub/Sub & Stream","slug":"ğŸ“Œ-2-redis-pub-sub-stream","link":"#ğŸ“Œ-2-redis-pub-sub-stream","children":[{"level":3,"title":"ğŸ”¹ Redis Pub/Sub","slug":"ğŸ”¹-redis-pub-sub","link":"#ğŸ”¹-redis-pub-sub","children":[]},{"level":3,"title":"ğŸ”¹ Redis Pub/Sub","slug":"ğŸ”¹-redis-pub-sub-1","link":"#ğŸ”¹-redis-pub-sub-1","children":[]},{"level":3,"title":"ğŸ”¹ So sÃ¡nh Redis Pub/Sub & Stream","slug":"ğŸ”¹-so-sanh-redis-pub-sub-stream","link":"#ğŸ”¹-so-sanh-redis-pub-sub-stream","children":[]}]},{"level":2,"title":"ğŸ“Œ 3. Tá»‘i Æ°u hÃ³a Redis (Performance Tuning)","slug":"ğŸ“Œ-3-toi-uu-hoa-redis-performance-tuning","link":"#ğŸ“Œ-3-toi-uu-hoa-redis-performance-tuning","children":[{"level":3,"title":"ğŸ”¹ Cáº¥u hÃ¬nh Redis tá»‘i Æ°u","slug":"ğŸ”¹-cau-hinh-redis-toi-uu","link":"#ğŸ”¹-cau-hinh-redis-toi-uu","children":[]},{"level":3,"title":"ğŸ”¹ Tá»‘i Æ°u Query trong Redis","slug":"ğŸ”¹-toi-uu-query-trong-redis","link":"#ğŸ”¹-toi-uu-query-trong-redis","children":[]},{"level":3,"title":"ğŸ”¹ Tá»‘i Æ°u Dá»¯ liá»‡u trong Redis","slug":"ğŸ”¹-toi-uu-du-lieu-trong-redis","link":"#ğŸ”¹-toi-uu-du-lieu-trong-redis","children":[]},{"level":3,"title":"ğŸ”¹ Tá»‘i Æ°u Replica & Cluster","slug":"ğŸ”¹-toi-uu-replica-cluster","link":"#ğŸ”¹-toi-uu-replica-cluster","children":[]},{"level":3,"title":"ğŸ”¹ GiÃ¡m sÃ¡t & Debug Redis","slug":"ğŸ”¹-giam-sat-debug-redis","link":"#ğŸ”¹-giam-sat-debug-redis","children":[]}]},{"level":2,"title":"ğŸ“Œ 4. Káº¿t há»£p Redis vá»›i cÃ¡c ngÃ´n ngá»¯ láº­p trÃ¬nh","slug":"ğŸ“Œ-4-ket-hop-redis-voi-cac-ngon-ngu-lap-trinh","link":"#ğŸ“Œ-4-ket-hop-redis-voi-cac-ngon-ngu-lap-trinh","children":[{"level":3,"title":"ğŸ”¹ Redis vá»›i Python (redis-py)","slug":"ğŸ”¹-redis-voi-python-redis-py","link":"#ğŸ”¹-redis-voi-python-redis-py","children":[]},{"level":3,"title":"ğŸ”¹ Redis vá»›i Java (Jedis, Lettuce)","slug":"ğŸ”¹-redis-voi-java-jedis-lettuce","link":"#ğŸ”¹-redis-voi-java-jedis-lettuce","children":[]}]}],"git":{},"filePathRelative":"blog-posts/back-end/redis-advanced.md"}');export{r as comp,d as data};

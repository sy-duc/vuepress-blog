import{_ as s,c as a,d as e,o as t}from"./app-DIj4lqCJ.js";const p={};function l(i,n){return t(),a("div",null,n[0]||(n[0]=[e(`<h1 id="van-Ä‘e-khi-su-dung-pl-sql-thuc-te-expert" tabindex="-1"><a class="header-anchor" href="#van-Ä‘e-khi-su-dung-pl-sql-thuc-te-expert"><span>Váº¥n Ä‘á» khi sá»­ dá»¥ng PL/SQL thá»±c táº¿ (Expert)</span></a></h1><p><a href="#1">1. PL/SQL Performance Tuning</a></p><p><a href="#2">2. Báº£o máº­t trong PL/SQL</a></p><p><a name="1"></a></p><h2 id="ğŸ“Œ-1-pl-sql-performance-tuning" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-1-pl-sql-performance-tuning"><span>ğŸ“Œ 1. PL/SQL Performance Tuning</span></a></h2><p>Tá»‘i Æ°u hiá»‡u suáº¥t PL/SQL ráº¥t quan trá»ng Ä‘á»ƒ giáº£m thá»i gian cháº¡y, giáº£m táº£i há»‡ thá»‘ng vÃ  cáº£i thiá»‡n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.</p><p>DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u quan trá»ng:</p><h3 id="ğŸ”¹-su-dung-bulk-collect-forall-thay-vi-vong-lap-for-loop" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-su-dung-bulk-collect-forall-thay-vi-vong-lap-for-loop"><span>ğŸ”¹ Sá»­ dá»¥ng BULK COLLECT &amp; FORALL thay vÃ¬ vÃ²ng láº·p FOR/LOOP</span></a></h3><p>âŒ Khi cháº¡y SELECT INTO hoáº·c INSERT/UPDATE/DELETE tá»«ng dÃ²ng trong vÃ²ng láº·p, PL/SQL pháº£i liÃªn tá»¥c gá»i SQL Engine, gÃ¢y cháº­m.</p><p>âœ”ï¸ DÃ¹ng BULK COLLECT (truy váº¥n nhanh hÆ¡n) vÃ  FORALL (ghi dá»¯ liá»‡u hÃ ng loáº¡t) sáº½ chá»‰ gá»i SQL Engine 1 láº§n.</p><h3 id="ğŸ”¹-dung-index-hieu-qua" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-dung-index-hieu-qua"><span>ğŸ”¹ DÃ¹ng Index hiá»‡u quáº£</span></a></h3><p>âŒ Truy váº¥n WHERE mÃ  khÃ´ng cÃ³ Index sáº½ quÃ©t toÃ n bá»™ báº£ng (Full Table Scan), lÃ m giáº£m hiá»‡u suáº¥t.</p><p>âœ”ï¸ ThÃªm Index vÃ o cá»™t thÆ°á»ng xuyÃªn tÃ¬m kiáº¿m, JOIN hoáº·c ORDER BY.</p><h3 id="ğŸ”¹-tranh-su-dung-exception-khong-can-thiet" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-tranh-su-dung-exception-khong-can-thiet"><span>ğŸ”¹ TrÃ¡nh sá»­ dá»¥ng EXCEPTION khÃ´ng cáº§n thiáº¿t</span></a></h3><p>âŒ EXCEPTION lÃ m cháº­m chÆ°Æ¡ng trÃ¬nh náº¿u khÃ´ng xá»­ lÃ½ há»£p lÃ½.</p><p>âœ”ï¸ Kiá»ƒm tra Ä‘iá»u kiá»‡n trÆ°á»›c khi thá»±c hiá»‡n thao tÃ¡c cÃ³ kháº£ nÄƒng lá»—i. Má»¥c Ä‘Ã­ch khÃ´ng Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh pháº£i báº¯t lá»—i khÃ´ng cáº§n thiáº¿t.</p><p>VÃ­ dá»¥:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">DECLARE</span></span>
<span class="line">    v_count NUMBER<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> v_count <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">IF</span> v_count <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">THEN</span></span>
<span class="line">        <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> employees <span class="token punctuation">(</span>employee_id<span class="token punctuation">,</span> first_name<span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">ELSE</span></span>
<span class="line">        DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Employee ID Ä‘Ã£ tá»“n táº¡i!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸ”¹-han-che-su-dung-triggers-khi-khong-can-thiet" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-han-che-su-dung-triggers-khi-khong-can-thiet"><span>ğŸ”¹ Háº¡n cháº¿ sá»­ dá»¥ng Triggers khi khÃ´ng cáº§n thiáº¿t</span></a></h3><p>âŒ Triggers cháº¡y ngáº§m má»—i khi cÃ³ thao tÃ¡c INSERT/UPDATE/DELETE, cÃ³ thá»ƒ gÃ¢y cháº­m.</p><p>âœ”ï¸ Náº¿u logic trigger cÃ³ thá»ƒ Ä‘Æ°á»£c thá»±c hiá»‡n trong Stored Procedure, hÃ£y dÃ¹ng Stored Procedure thay vÃ¬ Trigger.</p><p><a name="2"></a></p><h2 id="ğŸ“Œ-2-bao-mat-trong-pl-sql" tabindex="-1"><a class="header-anchor" href="#ğŸ“Œ-2-bao-mat-trong-pl-sql"><span>ğŸ“Œ 2. Báº£o máº­t trong PL/SQL</span></a></h2><p>Báº£o máº­t trong PL/SQL ráº¥t quan trá»ng Ä‘á»ƒ báº£o vá»‡ dá»¯ liá»‡u, kiá»ƒm soÃ¡t quyá»n truy cáº­p vÃ  ngÄƒn cháº·n cÃ¡c cuá»™c táº¥n cÃ´ng nhÆ° SQL Injection.</p><p>DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c khÃ­a cáº¡nh quan trá»ng vá» báº£o máº­t trong PL/SQL:</p><h3 id="ğŸ”¹-kiem-soat-quyen-truy-cap-voi-grant-va-revoke" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-kiem-soat-quyen-truy-cap-voi-grant-va-revoke"><span>ğŸ”¹ Kiá»ƒm soÃ¡t quyá»n truy cáº­p vá»›i GRANT vÃ  REVOKE</span></a></h3><ul><li><p>KhÃ´ng pháº£i ngÆ°á»i dÃ¹ng nÃ o cÅ©ng nÃªn cÃ³ toÃ n quyá»n trÃªn database.</p></li><li><p>Náº¿u ai cÅ©ng cÃ³ quyá»n SELECT, INSERT, UPDATE, DELETE, dá»¯ liá»‡u cÃ³ thá»ƒ bá»‹ lá»™ hoáº·c chá»‰nh sá»­a ngoÃ i Ã½ muá»‘n.</p></li></ul><p>ğŸ’¡ Sá»­ dá»¥ng GRANT (cáº¥p quyá»n) vÃ  REVOKE (thu há»“i quyá»n) giÃºp kiá»ƒm soÃ¡t quyá»n truy cáº­p cá»§a ngÆ°á»i dÃ¹ng.</p><h4 id="_1ï¸âƒ£-cap-quyen-grant" tabindex="-1"><a class="header-anchor" href="#_1ï¸âƒ£-cap-quyen-grant"><span>1ï¸âƒ£ Cáº¥p quyá»n (GRANT)</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> employees <span class="token keyword">TO</span> hr_user<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">GRANT</span> <span class="token keyword">EXECUTE</span> <span class="token keyword">ON</span> update_salary <span class="token keyword">TO</span> hr_user<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>âœ… hr_user cÃ³ thá»ƒ SELECT, INSERT vÃ o báº£ng employees vÃ  gá»i procedure update_salary</p><h4 id="_2ï¸âƒ£-thu-hoi-quyen-revoke" tabindex="-1"><a class="header-anchor" href="#_2ï¸âƒ£-thu-hoi-quyen-revoke"><span>2ï¸âƒ£ Thu há»“i quyá»n (REVOKE)</span></a></h4><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">REVOKE</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> employees <span class="token keyword">FROM</span> hr_user<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>âœ… hr_user bá»‹ máº¥t quyá»n INSERT trÃªn báº£ng employees.</p><h3 id="ğŸ”¹-definer-vs-invoker-rights" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-definer-vs-invoker-rights"><span>ğŸ”¹ DEFINER vs INVOKER RIGHTS</span></a></h3><p>Máº·c Ä‘á»‹nh, khi má»™t user gá»i Procedure hoáº·c Function, nÃ³ sáº½ cháº¡y vá»›i quyá»n cá»§a ngÆ°á»i táº¡o ra nÃ³ (DEFINER).</p><p>â¡ï¸ Náº¿u admin_user táº¡o má»™t PROCEDURE get_salary, thÃ¬ báº¥t ká»³ ai gá»i nÃ³ cÅ©ng cÃ³ thá»ƒ xem lÆ°Æ¡ng cá»§a nhÃ¢n viÃªn, ngay cáº£ khi há» khÃ´ng cÃ³ quyá»n xem báº£ng employees.</p><p>ğŸ’¡ Sá»­ dá»¥ng AUTHID CURRENT_USER náº¿u muá»‘n Procedure cháº¡y theo quyá»n cá»§a ngÆ°á»i gá»i (INVOKER).</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> get_salary AUTHID <span class="token keyword">CURRENT_USER</span> <span class="token operator">IS</span></span>
<span class="line">    v_salary NUMBER<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    <span class="token keyword">SELECT</span> salary <span class="token keyword">INTO</span> v_salary <span class="token keyword">FROM</span> employees <span class="token keyword">WHERE</span> employee_id <span class="token operator">=</span> <span class="token number">101</span><span class="token punctuation">;</span></span>
<span class="line">    DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Salary: &#39;</span> <span class="token operator">||</span> v_salary<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ğŸ”¹-kiem-soat-truy-cap-bang-virtual-private-database-vpd" tabindex="-1"><a class="header-anchor" href="#ğŸ”¹-kiem-soat-truy-cap-bang-virtual-private-database-vpd"><span>ğŸ”¹ Kiá»ƒm soÃ¡t truy cáº­p báº±ng Virtual Private Database (VPD)</span></a></h3><p>Má»™t sá»‘ ngÆ°á»i dÃ¹ng chá»‰ nÃªn tháº¥y má»™t pháº§n dá»¯ liá»‡u chá»© khÃ´ng pháº£i toÃ n bá»™ báº£ng.</p><p>â¡ï¸ DÃ¹ng VPD (Virtual Private Database) sáº½ giÃºp lá»c dá»¯ liá»‡u tá»± Ä‘á»™ng.</p><p>ğŸ” VÃ­ dá»¥: Chá»‰ cho phÃ©p nhÃ¢n viÃªn tháº¥y dá»¯ liá»‡u cá»§a chÃ­nh há»</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql" data-title="sql"><pre><code><span class="line"><span class="token keyword">BEGIN</span></span>
<span class="line">    DBMS_RLS<span class="token punctuation">.</span>ADD_POLICY <span class="token punctuation">(</span></span>
<span class="line">        object_schema   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;HR&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        object_name     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;EMPLOYEES&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        policy_name     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;EMPLOYEE_FILTER&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        function_schema <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;HR&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        policy_function <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;emp_filter&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        statement_types <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#39;SELECT&#39;</span></span>
<span class="line">    <span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">END</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token operator">/</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,44)]))}const o=s(p,[["render",l],["__file","oracle-plsql-expert.html.vue"]]),r=JSON.parse('{"path":"/blog-posts/hidden/oracle-plsql-expert.html","title":"Váº¥n Ä‘á» khi sá»­ dá»¥ng PL/SQL thá»±c táº¿","lang":"vi-VN","frontmatter":{"title":"Váº¥n Ä‘á» khi sá»­ dá»¥ng PL/SQL thá»±c táº¿"},"headers":[{"level":2,"title":"ğŸ“Œ 1. PL/SQL Performance Tuning","slug":"ğŸ“Œ-1-pl-sql-performance-tuning","link":"#ğŸ“Œ-1-pl-sql-performance-tuning","children":[{"level":3,"title":"ğŸ”¹ Sá»­ dá»¥ng BULK COLLECT & FORALL thay vÃ¬ vÃ²ng láº·p FOR/LOOP","slug":"ğŸ”¹-su-dung-bulk-collect-forall-thay-vi-vong-lap-for-loop","link":"#ğŸ”¹-su-dung-bulk-collect-forall-thay-vi-vong-lap-for-loop","children":[]},{"level":3,"title":"ğŸ”¹ DÃ¹ng Index hiá»‡u quáº£","slug":"ğŸ”¹-dung-index-hieu-qua","link":"#ğŸ”¹-dung-index-hieu-qua","children":[]},{"level":3,"title":"ğŸ”¹ TrÃ¡nh sá»­ dá»¥ng EXCEPTION khÃ´ng cáº§n thiáº¿t","slug":"ğŸ”¹-tranh-su-dung-exception-khong-can-thiet","link":"#ğŸ”¹-tranh-su-dung-exception-khong-can-thiet","children":[]},{"level":3,"title":"ğŸ”¹ Háº¡n cháº¿ sá»­ dá»¥ng Triggers khi khÃ´ng cáº§n thiáº¿t","slug":"ğŸ”¹-han-che-su-dung-triggers-khi-khong-can-thiet","link":"#ğŸ”¹-han-che-su-dung-triggers-khi-khong-can-thiet","children":[]}]},{"level":2,"title":"ğŸ“Œ 2. Báº£o máº­t trong PL/SQL","slug":"ğŸ“Œ-2-bao-mat-trong-pl-sql","link":"#ğŸ“Œ-2-bao-mat-trong-pl-sql","children":[{"level":3,"title":"ğŸ”¹ Kiá»ƒm soÃ¡t quyá»n truy cáº­p vá»›i GRANT vÃ  REVOKE","slug":"ğŸ”¹-kiem-soat-quyen-truy-cap-voi-grant-va-revoke","link":"#ğŸ”¹-kiem-soat-quyen-truy-cap-voi-grant-va-revoke","children":[]},{"level":3,"title":"ğŸ”¹ DEFINER vs INVOKER RIGHTS","slug":"ğŸ”¹-definer-vs-invoker-rights","link":"#ğŸ”¹-definer-vs-invoker-rights","children":[]},{"level":3,"title":"ğŸ”¹ Kiá»ƒm soÃ¡t truy cáº­p báº±ng Virtual Private Database (VPD)","slug":"ğŸ”¹-kiem-soat-truy-cap-bang-virtual-private-database-vpd","link":"#ğŸ”¹-kiem-soat-truy-cap-bang-virtual-private-database-vpd","children":[]}]}],"git":{},"filePathRelative":"blog-posts/hidden/oracle-plsql-expert.md"}');export{o as comp,r as data};
